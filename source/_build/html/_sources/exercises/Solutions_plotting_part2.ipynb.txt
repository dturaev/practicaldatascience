{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Plotting Exercises, Part 2"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Wealth and Democracy\n",
    "\n",
    "Let's now pivot from working with example data to real data. Load the World Development Indicator data you worked with over the summer. This is country-level data that includes information on both countries' GDP per capita (a measure of wealth) and the Polity IV scores (a measure of how democratic a country is -- countries with higher scores are liberal democracies, countries with low scores are autocratic.). Use the code below to download the data. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import pandas as pd\n",
    "import numpy as np\n",
    "wdi = pd.read_csv(\n",
    "    \"https://raw.githubusercontent.com/nickeubank/\"\n",
    "    \"practicaldatascience/master/Example_Data/world-small.csv\"\n",
    ")\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Your data should look like this: "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>country</th>\n",
       "      <th>region</th>\n",
       "      <th>gdppcap08</th>\n",
       "      <th>polityIV</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Albania</td>\n",
       "      <td>C&amp;E Europe</td>\n",
       "      <td>7715</td>\n",
       "      <td>17.8</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Algeria</td>\n",
       "      <td>Africa</td>\n",
       "      <td>8033</td>\n",
       "      <td>10.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Angola</td>\n",
       "      <td>Africa</td>\n",
       "      <td>5899</td>\n",
       "      <td>8.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Argentina</td>\n",
       "      <td>S. America</td>\n",
       "      <td>14333</td>\n",
       "      <td>18.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Armenia</td>\n",
       "      <td>C&amp;E Europe</td>\n",
       "      <td>6070</td>\n",
       "      <td>15.0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "     country      region  gdppcap08  polityIV\n",
       "0    Albania  C&E Europe       7715      17.8\n",
       "1    Algeria      Africa       8033      10.0\n",
       "2     Angola      Africa       5899       8.0\n",
       "3  Argentina  S. America      14333      18.0\n",
       "4    Armenia  C&E Europe       6070      15.0"
      ]
     },
     "execution_count": 2,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "wdi.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Exercise 1\n",
    "\n",
    "Let's being analyzing this data by estimating a simple linear model (\"ordinary least squares\") of the relationship between GDP per capita (`gdppcap08`) and democracy scores (`polityIV`). We will do so using the `statsmodel` package, which we'll discuss in detail later is this course. For the momement, just use this code:\n",
    "\n",
    "```python\n",
    "import statsmodels.formula.api as smf\n",
    "results = smf.ols('polityIV ~ gdppcap08',\n",
    "                   data=wdi).fit()\n",
    "print(results.summary())\n",
    "```\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "                            OLS Regression Results                            \n",
      "==============================================================================\n",
      "Dep. Variable:               polityIV   R-squared:                       0.047\n",
      "Model:                            OLS   Adj. R-squared:                  0.040\n",
      "Method:                 Least Squares   F-statistic:                     6.981\n",
      "Date:                Fri, 01 Oct 2021   Prob (F-statistic):            0.00915\n",
      "Time:                        14:30:51   Log-Likelihood:                -475.14\n",
      "No. Observations:                 145   AIC:                             954.3\n",
      "Df Residuals:                     143   BIC:                             960.2\n",
      "Df Model:                           1                                         \n",
      "Covariance Type:            nonrobust                                         \n",
      "==============================================================================\n",
      "                 coef    std err          t      P>|t|      [0.025      0.975]\n",
      "------------------------------------------------------------------------------\n",
      "Intercept     12.1354      0.721     16.841      0.000      10.711      13.560\n",
      "gdppcap08   9.602e-05   3.63e-05      2.642      0.009    2.42e-05       0.000\n",
      "==============================================================================\n",
      "Omnibus:                       17.820   Durbin-Watson:                   1.939\n",
      "Prob(Omnibus):                  0.000   Jarque-Bera (JB):               20.393\n",
      "Skew:                          -0.887   Prob(JB):                     3.73e-05\n",
      "Kurtosis:                       2.524   Cond. No.                     2.67e+04\n",
      "==============================================================================\n",
      "\n",
      "Notes:\n",
      "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n",
      "[2] The condition number is large, 2.67e+04. This might indicate that there are\n",
      "strong multicollinearity or other numerical problems.\n"
     ]
    }
   ],
   "source": [
    "import statsmodels.formula.api as smf\n",
    "results = smf.ols('polityIV ~ gdppcap08',\n",
    "                   data=wdi).fit()\n",
    "print(results.summary())"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Exercise 2\n",
    "\n",
    "Based on the results of this analysis, what would you conclude about about the relationship between `gdppcap08` and `polityIV`? \n",
    "\n",
    "(If you aren't familiar with Linear Models and aren't sure how to interprete this, you can also just look at the simple correlation between these two variables using `wdi[['polityIV', 'gdppcap08']].corr()`.)\n",
    "\n",
    "Write down your conclusions. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [],
   "source": [
    "# They seem to have a positive relationship, and\n",
    "# Polity scores seem to increase 1 point for every $10,000 in gdp per capita. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Exercise 3\n",
    "\n",
    "Now let's plot the relationship you just estimated statistically. First, use Altair to create a scatter plot of `polityIV` and `gdppcap08`. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-8c561aefaa744564b7e9c57307897066\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-8c561aefaa744564b7e9c57307897066\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-8c561aefaa744564b7e9c57307897066\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"data\": {\"name\": \"data-50afffcb03ca16fbefb225cc29275795\"}, \"mark\": \"point\", \"encoding\": {\"x\": {\"type\": \"quantitative\", \"field\": \"gdppcap08\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}, \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-50afffcb03ca16fbefb225cc29275795\": [{\"country\": \"Albania\", \"region\": \"C&E Europe\", \"gdppcap08\": 7715, \"polityIV\": 17.8}, {\"country\": \"Algeria\", \"region\": \"Africa\", \"gdppcap08\": 8033, \"polityIV\": 10.0}, {\"country\": \"Angola\", \"region\": \"Africa\", \"gdppcap08\": 5899, \"polityIV\": 8.0}, {\"country\": \"Argentina\", \"region\": \"S. America\", \"gdppcap08\": 14333, \"polityIV\": 18.0}, {\"country\": \"Armenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 6070, \"polityIV\": 15.0}, {\"country\": \"Australia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 35677, \"polityIV\": 20.0}, {\"country\": \"Austria\", \"region\": \"W. Europe\", \"gdppcap08\": 38152, \"polityIV\": 20.0}, {\"country\": \"Azerbaijan\", \"region\": \"C&E Europe\", \"gdppcap08\": 8765, \"polityIV\": 3.0}, {\"country\": \"Bahrain\", \"region\": \"Middle East\", \"gdppcap08\": 34605, \"polityIV\": 3.0}, {\"country\": \"Bangladesh\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1334, \"polityIV\": 16.0}, {\"country\": \"Belarus\", \"region\": \"C&E Europe\", \"gdppcap08\": 12261, \"polityIV\": 3.0}, {\"country\": \"Belgium\", \"region\": \"W. Europe\", \"gdppcap08\": 34493, \"polityIV\": 20.0}, {\"country\": \"Benin\", \"region\": \"Africa\", \"gdppcap08\": 1468, \"polityIV\": 16.2}, {\"country\": \"Bhutan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4755, \"polityIV\": 2.0}, {\"country\": \"Bolivia\", \"region\": \"S. America\", \"gdppcap08\": 4278, \"polityIV\": 18.2}, {\"country\": \"Botswana\", \"region\": \"Africa\", \"gdppcap08\": 13392, \"polityIV\": 19.0}, {\"country\": \"Brazil\", \"region\": \"S. America\", \"gdppcap08\": 10296, \"polityIV\": 18.0}, {\"country\": \"Bulgaria\", \"region\": \"C&E Europe\", \"gdppcap08\": 12393, \"polityIV\": 19.0}, {\"country\": \"Burkina Faso\", \"region\": \"Africa\", \"gdppcap08\": 1161, \"polityIV\": 10.0}, {\"country\": \"Cambodia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1905, \"polityIV\": 12.0}, {\"country\": \"Cameroon\", \"region\": \"Africa\", \"gdppcap08\": 2215, \"polityIV\": 6.0}, {\"country\": \"Canada\", \"region\": \"N. America\", \"gdppcap08\": 36444, \"polityIV\": 20.0}, {\"country\": \"Central African Republic\", \"region\": \"Africa\", \"gdppcap08\": 736, \"polityIV\": 10.2}, {\"country\": \"Chad\", \"region\": \"Africa\", \"gdppcap08\": 1455, \"polityIV\": 8.0}, {\"country\": \"Chile\", \"region\": \"S. America\", \"gdppcap08\": 14465, \"polityIV\": 19.2}, {\"country\": \"China\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 5962, \"polityIV\": 3.0}, {\"country\": \"Colombia\", \"region\": \"S. America\", \"gdppcap08\": 8885, \"polityIV\": 17.0}, {\"country\": \"Comoros\", \"region\": \"Africa\", \"gdppcap08\": 1169, \"polityIV\": 15.8}, {\"country\": \"Congo Brazzaville\", \"region\": \"Africa\", \"gdppcap08\": 3946, \"polityIV\": 6.0}, {\"country\": \"Congo Kinshasa\", \"region\": \"Africa\", \"gdppcap08\": 321, \"polityIV\": 15.0}, {\"country\": \"Costa Rica\", \"region\": \"S. America\", \"gdppcap08\": 11241, \"polityIV\": 20.0}, {\"country\": \"Croatia\", \"region\": \"C&E Europe\", \"gdppcap08\": 19084, \"polityIV\": 18.4}, {\"country\": \"Cuba\", \"region\": \"S. America\", \"gdppcap08\": 9500, \"polityIV\": 3.0}, {\"country\": \"Czech Republic\", \"region\": \"C&E Europe\", \"gdppcap08\": 24712, \"polityIV\": 20.0}, {\"country\": \"Denmark\", \"region\": \"Scandinavia\", \"gdppcap08\": 36607, \"polityIV\": 20.0}, {\"country\": \"Djibouti\", \"region\": \"Africa\", \"gdppcap08\": 2140, \"polityIV\": 12.0}, {\"country\": \"Ecuador\", \"region\": \"S. America\", \"gdppcap08\": 8009, \"polityIV\": 16.2}, {\"country\": \"Egypt\", \"region\": \"Middle East\", \"gdppcap08\": 5416, \"polityIV\": 4.0}, {\"country\": \"El Salvador\", \"region\": \"S. America\", \"gdppcap08\": 6794, \"polityIV\": 17.0}, {\"country\": \"Equatorial Guinea\", \"region\": \"Africa\", \"gdppcap08\": 33873, \"polityIV\": 5.0}, {\"country\": \"Eritrea\", \"region\": \"Africa\", \"gdppcap08\": 632, \"polityIV\": 3.0}, {\"country\": \"Estonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 20662, \"polityIV\": 16.0}, {\"country\": \"Fiji\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4382, \"polityIV\": 13.8}, {\"country\": \"Finland\", \"region\": \"Scandinavia\", \"gdppcap08\": 35427, \"polityIV\": 20.0}, {\"country\": \"France\", \"region\": \"W. Europe\", \"gdppcap08\": 34045, \"polityIV\": 19.0}, {\"country\": \"Gabon\", \"region\": \"Africa\", \"gdppcap08\": 14527, \"polityIV\": 6.0}, {\"country\": \"Gambia\", \"region\": \"Africa\", \"gdppcap08\": 1363, \"polityIV\": 5.0}, {\"country\": \"Georgia\", \"region\": \"C&E Europe\", \"gdppcap08\": 4896, \"polityIV\": 15.666667}, {\"country\": \"Germany\", \"region\": \"W. Europe\", \"gdppcap08\": 35613, \"polityIV\": 20.0}, {\"country\": \"Ghana\", \"region\": \"Africa\", \"gdppcap08\": 1452, \"polityIV\": 16.666667}, {\"country\": \"Greece\", \"region\": \"W. Europe\", \"gdppcap08\": 29361, \"polityIV\": 20.0}, {\"country\": \"Guatemala\", \"region\": \"S. America\", \"gdppcap08\": 4760, \"polityIV\": 18.0}, {\"country\": \"Guinea\", \"region\": \"Africa\", \"gdppcap08\": 1204, \"polityIV\": 9.0}, {\"country\": \"Guinea-Bissau\", \"region\": \"Africa\", \"gdppcap08\": 538, \"polityIV\": 11.0}, {\"country\": \"Guyana\", \"region\": \"S. America\", \"gdppcap08\": 2542, \"polityIV\": 16.0}, {\"country\": \"Haiti\", \"region\": \"S. America\", \"gdppcap08\": 1177, \"polityIV\": 8.0}, {\"country\": \"Honduras\", \"region\": \"S. America\", \"gdppcap08\": 3965, \"polityIV\": 17.0}, {\"country\": \"Hungary\", \"region\": \"C&E Europe\", \"gdppcap08\": 19330, \"polityIV\": 20.0}, {\"country\": \"India\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2972, \"polityIV\": 19.0}, {\"country\": \"Indonesia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3975, \"polityIV\": 16.666667}, {\"country\": \"Iran\", \"region\": \"Middle East\", \"gdppcap08\": 11666, \"polityIV\": 10.0}, {\"country\": \"Iraq\", \"region\": \"Middle East\", \"gdppcap08\": 3570, \"polityIV\": 1.0}, {\"country\": \"Ireland\", \"region\": \"W. Europe\", \"gdppcap08\": 44200, \"polityIV\": 20.0}, {\"country\": \"Israel\", \"region\": \"Middle East\", \"gdppcap08\": 27548, \"polityIV\": 20.0}, {\"country\": \"Italy\", \"region\": \"W. Europe\", \"gdppcap08\": 30756, \"polityIV\": 20.0}, {\"country\": \"Jamaica\", \"region\": \"S. America\", \"gdppcap08\": 7705, \"polityIV\": 19.0}, {\"country\": \"Japan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 34099, \"polityIV\": 20.0}, {\"country\": \"Jordan\", \"region\": \"Middle East\", \"gdppcap08\": 5283, \"polityIV\": 8.0}, {\"country\": \"Kazakhstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 11315, \"polityIV\": 4.0}, {\"country\": \"Kenya\", \"region\": \"Africa\", \"gdppcap08\": 1590, \"polityIV\": 18.0}, {\"country\": \"Korea South\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27939, \"polityIV\": 18.0}, {\"country\": \"Kuwait\", \"region\": \"Middle East\", \"gdppcap08\": 39914, \"polityIV\": 3.0}, {\"country\": \"Kyrgyzstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2188, \"polityIV\": 7.0}, {\"country\": \"Laos\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2134, \"polityIV\": 3.0}, {\"country\": \"Latvia\", \"region\": \"C&E Europe\", \"gdppcap08\": 17100, \"polityIV\": 18.0}, {\"country\": \"Lesotho\", \"region\": \"Africa\", \"gdppcap08\": 1588, \"polityIV\": 18.0}, {\"country\": \"Liberia\", \"region\": \"Africa\", \"gdppcap08\": 388, \"polityIV\": 10.0}, {\"country\": \"Libya\", \"region\": \"Middle East\", \"gdppcap08\": 15402, \"polityIV\": 3.0}, {\"country\": \"Lithuania\", \"region\": \"C&E Europe\", \"gdppcap08\": 18824, \"polityIV\": 20.0}, {\"country\": \"Macedonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 10041, \"polityIV\": 19.0}, {\"country\": \"Madagascar\", \"region\": \"Africa\", \"gdppcap08\": 1049, \"polityIV\": 17.0}, {\"country\": \"Malawi\", \"region\": \"Africa\", \"gdppcap08\": 837, \"polityIV\": 15.0}, {\"country\": \"Malaysia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 14215, \"polityIV\": 13.0}, {\"country\": \"Mali\", \"region\": \"Africa\", \"gdppcap08\": 1128, \"polityIV\": 16.0}, {\"country\": \"Mauritania\", \"region\": \"Africa\", \"gdppcap08\": 2052, \"polityIV\": 4.0}, {\"country\": \"Mauritius\", \"region\": \"Africa\", \"gdppcap08\": 12079, \"polityIV\": 20.0}, {\"country\": \"Mexico\", \"region\": \"N. America\", \"gdppcap08\": 14495, \"polityIV\": 18.0}, {\"country\": \"Moldova\", \"region\": \"C&E Europe\", \"gdppcap08\": 2925, \"polityIV\": 18.0}, {\"country\": \"Mongolia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3566, \"polityIV\": 20.0}, {\"country\": \"Morocco\", \"region\": \"Middle East\", \"gdppcap08\": 4388, \"polityIV\": 4.0}, {\"country\": \"Mozambique\", \"region\": \"Africa\", \"gdppcap08\": 855, \"polityIV\": 16.0}, {\"country\": \"Namibia\", \"region\": \"Africa\", \"gdppcap08\": 6343, \"polityIV\": 16.0}, {\"country\": \"Nepal\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1112, \"polityIV\": 4.0}, {\"country\": \"Netherlands\", \"region\": \"W. Europe\", \"gdppcap08\": 40849, \"polityIV\": 20.0}, {\"country\": \"New Zealand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27029, \"polityIV\": 20.0}, {\"country\": \"Nicaragua\", \"region\": \"S. America\", \"gdppcap08\": 2682, \"polityIV\": 18.0}, {\"country\": \"Niger\", \"region\": \"Africa\", \"gdppcap08\": 684, \"polityIV\": 15.333333}, {\"country\": \"Nigeria\", \"region\": \"Africa\", \"gdppcap08\": 2082, \"polityIV\": 14.0}, {\"country\": \"Norway\", \"region\": \"Scandinavia\", \"gdppcap08\": 58138, \"polityIV\": 20.0}, {\"country\": \"Oman\", \"region\": \"Middle East\", \"gdppcap08\": 22478, \"polityIV\": 2.0}, {\"country\": \"Pakistan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2644, \"polityIV\": 5.0}, {\"country\": \"Papua New Guinea\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2208, \"polityIV\": 20.0}, {\"country\": \"Paraguay\", \"region\": \"S. America\", \"gdppcap08\": 4709, \"polityIV\": 17.666667}, {\"country\": \"Peru\", \"region\": \"S. America\", \"gdppcap08\": 8507, \"polityIV\": 19.0}, {\"country\": \"Philippines\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3510, \"polityIV\": 18.0}, {\"country\": \"Poland\", \"region\": \"C&E Europe\", \"gdppcap08\": 17625, \"polityIV\": 20.0}, {\"country\": \"Portugal\", \"region\": \"W. Europe\", \"gdppcap08\": 23074, \"polityIV\": 20.0}, {\"country\": \"Qatar\", \"region\": \"Middle East\", \"gdppcap08\": 85868, \"polityIV\": 0.0}, {\"country\": \"Romania\", \"region\": \"C&E Europe\", \"gdppcap08\": 14065, \"polityIV\": 18.333333}, {\"country\": \"Russia\", \"region\": \"C&E Europe\", \"gdppcap08\": 16139, \"polityIV\": 17.0}, {\"country\": \"Rwanda\", \"region\": \"Africa\", \"gdppcap08\": 1022, \"polityIV\": 6.6666667}, {\"country\": \"Saudi Arabia\", \"region\": \"Middle East\", \"gdppcap08\": 23920, \"polityIV\": 0.0}, {\"country\": \"Senegal\", \"region\": \"Africa\", \"gdppcap08\": 1772, \"polityIV\": 18.0}, {\"country\": \"Sierra Leone\", \"region\": \"Africa\", \"gdppcap08\": 766, \"polityIV\": 15.0}, {\"country\": \"Singapore\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 49284, \"polityIV\": 8.0}, {\"country\": \"Slovakia\", \"region\": \"C&E Europe\", \"gdppcap08\": 22081, \"polityIV\": 19.0}, {\"country\": \"Slovenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 27605, \"polityIV\": 20.0}, {\"country\": \"Solomon Islands\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2610, \"polityIV\": 18.0}, {\"country\": \"South Africa\", \"region\": \"Africa\", \"gdppcap08\": 10109, \"polityIV\": 19.0}, {\"country\": \"Spain\", \"region\": \"W. Europe\", \"gdppcap08\": 31954, \"polityIV\": 20.0}, {\"country\": \"Sri Lanka\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4560, \"polityIV\": 15.333333}, {\"country\": \"Sudan\", \"region\": \"Africa\", \"gdppcap08\": 2153, \"polityIV\": 4.0}, {\"country\": \"Swaziland\", \"region\": \"Africa\", \"gdppcap08\": 4928, \"polityIV\": 1.0}, {\"country\": \"Sweden\", \"region\": \"Scandinavia\", \"gdppcap08\": 37383, \"polityIV\": 20.0}, {\"country\": \"Switzerland\", \"region\": \"W. Europe\", \"gdppcap08\": 42536, \"polityIV\": 20.0}, {\"country\": \"Taiwan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 30881, \"polityIV\": 19.333333}, {\"country\": \"Tajikistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 1906, \"polityIV\": 7.6666667}, {\"country\": \"Tanzania\", \"region\": \"Africa\", \"gdppcap08\": 1263, \"polityIV\": 11.0}, {\"country\": \"Thailand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 7703, \"polityIV\": 19.0}, {\"country\": \"Togo\", \"region\": \"Africa\", \"gdppcap08\": 829, \"polityIV\": 8.0}, {\"country\": \"Tunisia\", \"region\": \"Middle East\", \"gdppcap08\": 7996, \"polityIV\": 6.0}, {\"country\": \"Turkey\", \"region\": \"Middle East\", \"gdppcap08\": 13920, \"polityIV\": 17.0}, {\"country\": \"Turkmenistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 6641, \"polityIV\": 1.0}, {\"country\": \"UAE\", \"region\": \"Middle East\", \"gdppcap08\": 38830, \"polityIV\": 2.0}, {\"country\": \"Uganda\", \"region\": \"Africa\", \"gdppcap08\": 1165, \"polityIV\": 6.0}, {\"country\": \"Ukraine\", \"region\": \"C&E Europe\", \"gdppcap08\": 7271, \"polityIV\": 16.0}, {\"country\": \"United Kingdom\", \"region\": \"W. Europe\", \"gdppcap08\": 35445, \"polityIV\": 20.0}, {\"country\": \"United States\", \"region\": \"N. America\", \"gdppcap08\": 46716, \"polityIV\": 20.0}, {\"country\": \"Uruguay\", \"region\": \"S. America\", \"gdppcap08\": 12734, \"polityIV\": 20.0}, {\"country\": \"Uzbekistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2656, \"polityIV\": 1.0}, {\"country\": \"Venezuela\", \"region\": \"S. America\", \"gdppcap08\": 12804, \"polityIV\": 16.0}, {\"country\": \"Vietnam\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2785, \"polityIV\": 3.0}, {\"country\": \"Yemen\", \"region\": \"Middle East\", \"gdppcap08\": 2400, \"polityIV\": 8.0}, {\"country\": \"Zambia\", \"region\": \"Africa\", \"gdppcap08\": 1356, \"polityIV\": 15.0}, {\"country\": \"Zimbabwe\", \"region\": \"Africa\", \"gdppcap08\": 188, \"polityIV\": 6.0}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.Chart(...)"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "import altair as alt \n",
    "scatter = alt.Chart(wdi).mark_point().encode(x='gdppcap08', y='polityIV')\n",
    "scatter"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Exercise 4\n",
    "\n",
    "Now overlay the linear model you just estimated."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-c430406a7eba4262b31110292a405563\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-c430406a7eba4262b31110292a405563\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-c430406a7eba4262b31110292a405563\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"layer\": [{\"mark\": \"line\", \"encoding\": {\"x\": {\"type\": \"quantitative\", \"field\": \"gdppcap08\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}, \"transform\": [{\"on\": \"gdppcap08\", \"regression\": \"polityIV\"}]}, {\"mark\": \"point\", \"encoding\": {\"x\": {\"type\": \"quantitative\", \"field\": \"gdppcap08\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}}], \"data\": {\"name\": \"data-50afffcb03ca16fbefb225cc29275795\"}, \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-50afffcb03ca16fbefb225cc29275795\": [{\"country\": \"Albania\", \"region\": \"C&E Europe\", \"gdppcap08\": 7715, \"polityIV\": 17.8}, {\"country\": \"Algeria\", \"region\": \"Africa\", \"gdppcap08\": 8033, \"polityIV\": 10.0}, {\"country\": \"Angola\", \"region\": \"Africa\", \"gdppcap08\": 5899, \"polityIV\": 8.0}, {\"country\": \"Argentina\", \"region\": \"S. America\", \"gdppcap08\": 14333, \"polityIV\": 18.0}, {\"country\": \"Armenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 6070, \"polityIV\": 15.0}, {\"country\": \"Australia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 35677, \"polityIV\": 20.0}, {\"country\": \"Austria\", \"region\": \"W. Europe\", \"gdppcap08\": 38152, \"polityIV\": 20.0}, {\"country\": \"Azerbaijan\", \"region\": \"C&E Europe\", \"gdppcap08\": 8765, \"polityIV\": 3.0}, {\"country\": \"Bahrain\", \"region\": \"Middle East\", \"gdppcap08\": 34605, \"polityIV\": 3.0}, {\"country\": \"Bangladesh\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1334, \"polityIV\": 16.0}, {\"country\": \"Belarus\", \"region\": \"C&E Europe\", \"gdppcap08\": 12261, \"polityIV\": 3.0}, {\"country\": \"Belgium\", \"region\": \"W. Europe\", \"gdppcap08\": 34493, \"polityIV\": 20.0}, {\"country\": \"Benin\", \"region\": \"Africa\", \"gdppcap08\": 1468, \"polityIV\": 16.2}, {\"country\": \"Bhutan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4755, \"polityIV\": 2.0}, {\"country\": \"Bolivia\", \"region\": \"S. America\", \"gdppcap08\": 4278, \"polityIV\": 18.2}, {\"country\": \"Botswana\", \"region\": \"Africa\", \"gdppcap08\": 13392, \"polityIV\": 19.0}, {\"country\": \"Brazil\", \"region\": \"S. America\", \"gdppcap08\": 10296, \"polityIV\": 18.0}, {\"country\": \"Bulgaria\", \"region\": \"C&E Europe\", \"gdppcap08\": 12393, \"polityIV\": 19.0}, {\"country\": \"Burkina Faso\", \"region\": \"Africa\", \"gdppcap08\": 1161, \"polityIV\": 10.0}, {\"country\": \"Cambodia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1905, \"polityIV\": 12.0}, {\"country\": \"Cameroon\", \"region\": \"Africa\", \"gdppcap08\": 2215, \"polityIV\": 6.0}, {\"country\": \"Canada\", \"region\": \"N. America\", \"gdppcap08\": 36444, \"polityIV\": 20.0}, {\"country\": \"Central African Republic\", \"region\": \"Africa\", \"gdppcap08\": 736, \"polityIV\": 10.2}, {\"country\": \"Chad\", \"region\": \"Africa\", \"gdppcap08\": 1455, \"polityIV\": 8.0}, {\"country\": \"Chile\", \"region\": \"S. America\", \"gdppcap08\": 14465, \"polityIV\": 19.2}, {\"country\": \"China\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 5962, \"polityIV\": 3.0}, {\"country\": \"Colombia\", \"region\": \"S. America\", \"gdppcap08\": 8885, \"polityIV\": 17.0}, {\"country\": \"Comoros\", \"region\": \"Africa\", \"gdppcap08\": 1169, \"polityIV\": 15.8}, {\"country\": \"Congo Brazzaville\", \"region\": \"Africa\", \"gdppcap08\": 3946, \"polityIV\": 6.0}, {\"country\": \"Congo Kinshasa\", \"region\": \"Africa\", \"gdppcap08\": 321, \"polityIV\": 15.0}, {\"country\": \"Costa Rica\", \"region\": \"S. America\", \"gdppcap08\": 11241, \"polityIV\": 20.0}, {\"country\": \"Croatia\", \"region\": \"C&E Europe\", \"gdppcap08\": 19084, \"polityIV\": 18.4}, {\"country\": \"Cuba\", \"region\": \"S. America\", \"gdppcap08\": 9500, \"polityIV\": 3.0}, {\"country\": \"Czech Republic\", \"region\": \"C&E Europe\", \"gdppcap08\": 24712, \"polityIV\": 20.0}, {\"country\": \"Denmark\", \"region\": \"Scandinavia\", \"gdppcap08\": 36607, \"polityIV\": 20.0}, {\"country\": \"Djibouti\", \"region\": \"Africa\", \"gdppcap08\": 2140, \"polityIV\": 12.0}, {\"country\": \"Ecuador\", \"region\": \"S. America\", \"gdppcap08\": 8009, \"polityIV\": 16.2}, {\"country\": \"Egypt\", \"region\": \"Middle East\", \"gdppcap08\": 5416, \"polityIV\": 4.0}, {\"country\": \"El Salvador\", \"region\": \"S. America\", \"gdppcap08\": 6794, \"polityIV\": 17.0}, {\"country\": \"Equatorial Guinea\", \"region\": \"Africa\", \"gdppcap08\": 33873, \"polityIV\": 5.0}, {\"country\": \"Eritrea\", \"region\": \"Africa\", \"gdppcap08\": 632, \"polityIV\": 3.0}, {\"country\": \"Estonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 20662, \"polityIV\": 16.0}, {\"country\": \"Fiji\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4382, \"polityIV\": 13.8}, {\"country\": \"Finland\", \"region\": \"Scandinavia\", \"gdppcap08\": 35427, \"polityIV\": 20.0}, {\"country\": \"France\", \"region\": \"W. Europe\", \"gdppcap08\": 34045, \"polityIV\": 19.0}, {\"country\": \"Gabon\", \"region\": \"Africa\", \"gdppcap08\": 14527, \"polityIV\": 6.0}, {\"country\": \"Gambia\", \"region\": \"Africa\", \"gdppcap08\": 1363, \"polityIV\": 5.0}, {\"country\": \"Georgia\", \"region\": \"C&E Europe\", \"gdppcap08\": 4896, \"polityIV\": 15.666667}, {\"country\": \"Germany\", \"region\": \"W. Europe\", \"gdppcap08\": 35613, \"polityIV\": 20.0}, {\"country\": \"Ghana\", \"region\": \"Africa\", \"gdppcap08\": 1452, \"polityIV\": 16.666667}, {\"country\": \"Greece\", \"region\": \"W. Europe\", \"gdppcap08\": 29361, \"polityIV\": 20.0}, {\"country\": \"Guatemala\", \"region\": \"S. America\", \"gdppcap08\": 4760, \"polityIV\": 18.0}, {\"country\": \"Guinea\", \"region\": \"Africa\", \"gdppcap08\": 1204, \"polityIV\": 9.0}, {\"country\": \"Guinea-Bissau\", \"region\": \"Africa\", \"gdppcap08\": 538, \"polityIV\": 11.0}, {\"country\": \"Guyana\", \"region\": \"S. America\", \"gdppcap08\": 2542, \"polityIV\": 16.0}, {\"country\": \"Haiti\", \"region\": \"S. America\", \"gdppcap08\": 1177, \"polityIV\": 8.0}, {\"country\": \"Honduras\", \"region\": \"S. America\", \"gdppcap08\": 3965, \"polityIV\": 17.0}, {\"country\": \"Hungary\", \"region\": \"C&E Europe\", \"gdppcap08\": 19330, \"polityIV\": 20.0}, {\"country\": \"India\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2972, \"polityIV\": 19.0}, {\"country\": \"Indonesia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3975, \"polityIV\": 16.666667}, {\"country\": \"Iran\", \"region\": \"Middle East\", \"gdppcap08\": 11666, \"polityIV\": 10.0}, {\"country\": \"Iraq\", \"region\": \"Middle East\", \"gdppcap08\": 3570, \"polityIV\": 1.0}, {\"country\": \"Ireland\", \"region\": \"W. Europe\", \"gdppcap08\": 44200, \"polityIV\": 20.0}, {\"country\": \"Israel\", \"region\": \"Middle East\", \"gdppcap08\": 27548, \"polityIV\": 20.0}, {\"country\": \"Italy\", \"region\": \"W. Europe\", \"gdppcap08\": 30756, \"polityIV\": 20.0}, {\"country\": \"Jamaica\", \"region\": \"S. America\", \"gdppcap08\": 7705, \"polityIV\": 19.0}, {\"country\": \"Japan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 34099, \"polityIV\": 20.0}, {\"country\": \"Jordan\", \"region\": \"Middle East\", \"gdppcap08\": 5283, \"polityIV\": 8.0}, {\"country\": \"Kazakhstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 11315, \"polityIV\": 4.0}, {\"country\": \"Kenya\", \"region\": \"Africa\", \"gdppcap08\": 1590, \"polityIV\": 18.0}, {\"country\": \"Korea South\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27939, \"polityIV\": 18.0}, {\"country\": \"Kuwait\", \"region\": \"Middle East\", \"gdppcap08\": 39914, \"polityIV\": 3.0}, {\"country\": \"Kyrgyzstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2188, \"polityIV\": 7.0}, {\"country\": \"Laos\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2134, \"polityIV\": 3.0}, {\"country\": \"Latvia\", \"region\": \"C&E Europe\", \"gdppcap08\": 17100, \"polityIV\": 18.0}, {\"country\": \"Lesotho\", \"region\": \"Africa\", \"gdppcap08\": 1588, \"polityIV\": 18.0}, {\"country\": \"Liberia\", \"region\": \"Africa\", \"gdppcap08\": 388, \"polityIV\": 10.0}, {\"country\": \"Libya\", \"region\": \"Middle East\", \"gdppcap08\": 15402, \"polityIV\": 3.0}, {\"country\": \"Lithuania\", \"region\": \"C&E Europe\", \"gdppcap08\": 18824, \"polityIV\": 20.0}, {\"country\": \"Macedonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 10041, \"polityIV\": 19.0}, {\"country\": \"Madagascar\", \"region\": \"Africa\", \"gdppcap08\": 1049, \"polityIV\": 17.0}, {\"country\": \"Malawi\", \"region\": \"Africa\", \"gdppcap08\": 837, \"polityIV\": 15.0}, {\"country\": \"Malaysia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 14215, \"polityIV\": 13.0}, {\"country\": \"Mali\", \"region\": \"Africa\", \"gdppcap08\": 1128, \"polityIV\": 16.0}, {\"country\": \"Mauritania\", \"region\": \"Africa\", \"gdppcap08\": 2052, \"polityIV\": 4.0}, {\"country\": \"Mauritius\", \"region\": \"Africa\", \"gdppcap08\": 12079, \"polityIV\": 20.0}, {\"country\": \"Mexico\", \"region\": \"N. America\", \"gdppcap08\": 14495, \"polityIV\": 18.0}, {\"country\": \"Moldova\", \"region\": \"C&E Europe\", \"gdppcap08\": 2925, \"polityIV\": 18.0}, {\"country\": \"Mongolia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3566, \"polityIV\": 20.0}, {\"country\": \"Morocco\", \"region\": \"Middle East\", \"gdppcap08\": 4388, \"polityIV\": 4.0}, {\"country\": \"Mozambique\", \"region\": \"Africa\", \"gdppcap08\": 855, \"polityIV\": 16.0}, {\"country\": \"Namibia\", \"region\": \"Africa\", \"gdppcap08\": 6343, \"polityIV\": 16.0}, {\"country\": \"Nepal\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1112, \"polityIV\": 4.0}, {\"country\": \"Netherlands\", \"region\": \"W. Europe\", \"gdppcap08\": 40849, \"polityIV\": 20.0}, {\"country\": \"New Zealand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27029, \"polityIV\": 20.0}, {\"country\": \"Nicaragua\", \"region\": \"S. America\", \"gdppcap08\": 2682, \"polityIV\": 18.0}, {\"country\": \"Niger\", \"region\": \"Africa\", \"gdppcap08\": 684, \"polityIV\": 15.333333}, {\"country\": \"Nigeria\", \"region\": \"Africa\", \"gdppcap08\": 2082, \"polityIV\": 14.0}, {\"country\": \"Norway\", \"region\": \"Scandinavia\", \"gdppcap08\": 58138, \"polityIV\": 20.0}, {\"country\": \"Oman\", \"region\": \"Middle East\", \"gdppcap08\": 22478, \"polityIV\": 2.0}, {\"country\": \"Pakistan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2644, \"polityIV\": 5.0}, {\"country\": \"Papua New Guinea\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2208, \"polityIV\": 20.0}, {\"country\": \"Paraguay\", \"region\": \"S. America\", \"gdppcap08\": 4709, \"polityIV\": 17.666667}, {\"country\": \"Peru\", \"region\": \"S. America\", \"gdppcap08\": 8507, \"polityIV\": 19.0}, {\"country\": \"Philippines\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3510, \"polityIV\": 18.0}, {\"country\": \"Poland\", \"region\": \"C&E Europe\", \"gdppcap08\": 17625, \"polityIV\": 20.0}, {\"country\": \"Portugal\", \"region\": \"W. Europe\", \"gdppcap08\": 23074, \"polityIV\": 20.0}, {\"country\": \"Qatar\", \"region\": \"Middle East\", \"gdppcap08\": 85868, \"polityIV\": 0.0}, {\"country\": \"Romania\", \"region\": \"C&E Europe\", \"gdppcap08\": 14065, \"polityIV\": 18.333333}, {\"country\": \"Russia\", \"region\": \"C&E Europe\", \"gdppcap08\": 16139, \"polityIV\": 17.0}, {\"country\": \"Rwanda\", \"region\": \"Africa\", \"gdppcap08\": 1022, \"polityIV\": 6.6666667}, {\"country\": \"Saudi Arabia\", \"region\": \"Middle East\", \"gdppcap08\": 23920, \"polityIV\": 0.0}, {\"country\": \"Senegal\", \"region\": \"Africa\", \"gdppcap08\": 1772, \"polityIV\": 18.0}, {\"country\": \"Sierra Leone\", \"region\": \"Africa\", \"gdppcap08\": 766, \"polityIV\": 15.0}, {\"country\": \"Singapore\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 49284, \"polityIV\": 8.0}, {\"country\": \"Slovakia\", \"region\": \"C&E Europe\", \"gdppcap08\": 22081, \"polityIV\": 19.0}, {\"country\": \"Slovenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 27605, \"polityIV\": 20.0}, {\"country\": \"Solomon Islands\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2610, \"polityIV\": 18.0}, {\"country\": \"South Africa\", \"region\": \"Africa\", \"gdppcap08\": 10109, \"polityIV\": 19.0}, {\"country\": \"Spain\", \"region\": \"W. Europe\", \"gdppcap08\": 31954, \"polityIV\": 20.0}, {\"country\": \"Sri Lanka\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4560, \"polityIV\": 15.333333}, {\"country\": \"Sudan\", \"region\": \"Africa\", \"gdppcap08\": 2153, \"polityIV\": 4.0}, {\"country\": \"Swaziland\", \"region\": \"Africa\", \"gdppcap08\": 4928, \"polityIV\": 1.0}, {\"country\": \"Sweden\", \"region\": \"Scandinavia\", \"gdppcap08\": 37383, \"polityIV\": 20.0}, {\"country\": \"Switzerland\", \"region\": \"W. Europe\", \"gdppcap08\": 42536, \"polityIV\": 20.0}, {\"country\": \"Taiwan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 30881, \"polityIV\": 19.333333}, {\"country\": \"Tajikistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 1906, \"polityIV\": 7.6666667}, {\"country\": \"Tanzania\", \"region\": \"Africa\", \"gdppcap08\": 1263, \"polityIV\": 11.0}, {\"country\": \"Thailand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 7703, \"polityIV\": 19.0}, {\"country\": \"Togo\", \"region\": \"Africa\", \"gdppcap08\": 829, \"polityIV\": 8.0}, {\"country\": \"Tunisia\", \"region\": \"Middle East\", \"gdppcap08\": 7996, \"polityIV\": 6.0}, {\"country\": \"Turkey\", \"region\": \"Middle East\", \"gdppcap08\": 13920, \"polityIV\": 17.0}, {\"country\": \"Turkmenistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 6641, \"polityIV\": 1.0}, {\"country\": \"UAE\", \"region\": \"Middle East\", \"gdppcap08\": 38830, \"polityIV\": 2.0}, {\"country\": \"Uganda\", \"region\": \"Africa\", \"gdppcap08\": 1165, \"polityIV\": 6.0}, {\"country\": \"Ukraine\", \"region\": \"C&E Europe\", \"gdppcap08\": 7271, \"polityIV\": 16.0}, {\"country\": \"United Kingdom\", \"region\": \"W. Europe\", \"gdppcap08\": 35445, \"polityIV\": 20.0}, {\"country\": \"United States\", \"region\": \"N. America\", \"gdppcap08\": 46716, \"polityIV\": 20.0}, {\"country\": \"Uruguay\", \"region\": \"S. America\", \"gdppcap08\": 12734, \"polityIV\": 20.0}, {\"country\": \"Uzbekistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2656, \"polityIV\": 1.0}, {\"country\": \"Venezuela\", \"region\": \"S. America\", \"gdppcap08\": 12804, \"polityIV\": 16.0}, {\"country\": \"Vietnam\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2785, \"polityIV\": 3.0}, {\"country\": \"Yemen\", \"region\": \"Middle East\", \"gdppcap08\": 2400, \"polityIV\": 8.0}, {\"country\": \"Zambia\", \"region\": \"Africa\", \"gdppcap08\": 1356, \"polityIV\": 15.0}, {\"country\": \"Zimbabwe\", \"region\": \"Africa\", \"gdppcap08\": 188, \"polityIV\": 6.0}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.LayerChart(...)"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "linear = scatter.transform_regression(\"gdppcap08\", \"polityIV\").mark_line()\n",
    "linear + scatter"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Exercise 5\n",
    "\n",
    "Does it seem like the linear model you estimated fits the data well?"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Not even close..."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Exercise 6\n",
    "\n",
    "Linear models impose a very strict *functional form* on the model they use: they try to draw a straight line through the data, no matter what. \n",
    "\n",
    "Can you think of a transform for your data that would make the data a little more sane?"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-7b37ffda1f6b49e2801e2df8c7b57663\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-7b37ffda1f6b49e2801e2df8c7b57663\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-7b37ffda1f6b49e2801e2df8c7b57663\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"data\": {\"name\": \"data-1e3b6cfdcd952e83b0293109cfc54611\"}, \"mark\": \"point\", \"encoding\": {\"x\": {\"type\": \"quantitative\", \"field\": \"log_gdp\", \"scale\": {\"zero\": false}}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}, \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-1e3b6cfdcd952e83b0293109cfc54611\": [{\"country\": \"Albania\", \"region\": \"C&E Europe\", \"gdppcap08\": 7715, \"polityIV\": 17.8, \"log_gdp\": 8.950921764797261}, {\"country\": \"Algeria\", \"region\": \"Africa\", \"gdppcap08\": 8033, \"polityIV\": 10.0, \"log_gdp\": 8.991313336173812}, {\"country\": \"Angola\", \"region\": \"Africa\", \"gdppcap08\": 5899, \"polityIV\": 8.0, \"log_gdp\": 8.682538124003075}, {\"country\": \"Argentina\", \"region\": \"S. America\", \"gdppcap08\": 14333, \"polityIV\": 18.0, \"log_gdp\": 9.570319849923216}, {\"country\": \"Armenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 6070, \"polityIV\": 15.0, \"log_gdp\": 8.711113884053544}, {\"country\": \"Australia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 35677, \"polityIV\": 20.0, \"log_gdp\": 10.482261502441474}, {\"country\": \"Austria\", \"region\": \"W. Europe\", \"gdppcap08\": 38152, \"polityIV\": 20.0, \"log_gdp\": 10.54933345997806}, {\"country\": \"Azerbaijan\", \"region\": \"C&E Europe\", \"gdppcap08\": 8765, \"polityIV\": 3.0, \"log_gdp\": 9.078521797355334}, {\"country\": \"Bahrain\", \"region\": \"Middle East\", \"gdppcap08\": 34605, \"polityIV\": 3.0, \"log_gdp\": 10.451753459275963}, {\"country\": \"Bangladesh\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1334, \"polityIV\": 16.0, \"log_gdp\": 7.195937226475569}, {\"country\": \"Belarus\", \"region\": \"C&E Europe\", \"gdppcap08\": 12261, \"polityIV\": 3.0, \"log_gdp\": 9.414178772232386}, {\"country\": \"Belgium\", \"region\": \"W. Europe\", \"gdppcap08\": 34493, \"polityIV\": 20.0, \"log_gdp\": 10.44851168388203}, {\"country\": \"Benin\", \"region\": \"Africa\", \"gdppcap08\": 1468, \"polityIV\": 16.2, \"log_gdp\": 7.291656209174461}, {\"country\": \"Bhutan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4755, \"polityIV\": 2.0, \"log_gdp\": 8.46695197497949}, {\"country\": \"Bolivia\", \"region\": \"S. America\", \"gdppcap08\": 4278, \"polityIV\": 18.2, \"log_gdp\": 8.361240889642351}, {\"country\": \"Botswana\", \"region\": \"Africa\", \"gdppcap08\": 13392, \"polityIV\": 19.0, \"log_gdp\": 9.502412792729256}, {\"country\": \"Brazil\", \"region\": \"S. America\", \"gdppcap08\": 10296, \"polityIV\": 18.0, \"log_gdp\": 9.239510749275963}, {\"country\": \"Bulgaria\", \"region\": \"C&E Europe\", \"gdppcap08\": 12393, \"polityIV\": 19.0, \"log_gdp\": 9.424887076064874}, {\"country\": \"Burkina Faso\", \"region\": \"Africa\", \"gdppcap08\": 1161, \"polityIV\": 10.0, \"log_gdp\": 7.057036981697891}, {\"country\": \"Cambodia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1905, \"polityIV\": 12.0, \"log_gdp\": 7.552237287560802}, {\"country\": \"Cameroon\", \"region\": \"Africa\", \"gdppcap08\": 2215, \"polityIV\": 6.0, \"log_gdp\": 7.703007682479236}, {\"country\": \"Canada\", \"region\": \"N. America\", \"gdppcap08\": 36444, \"polityIV\": 20.0, \"log_gdp\": 10.50353211483375}, {\"country\": \"Central African Republic\", \"region\": \"Africa\", \"gdppcap08\": 736, \"polityIV\": 10.2, \"log_gdp\": 6.601230118728877}, {\"country\": \"Chad\", \"region\": \"Africa\", \"gdppcap08\": 1455, \"polityIV\": 8.0, \"log_gdp\": 7.282761179605593}, {\"country\": \"Chile\", \"region\": \"S. America\", \"gdppcap08\": 14465, \"polityIV\": 19.2, \"log_gdp\": 9.579487217410236}, {\"country\": \"China\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 5962, \"polityIV\": 3.0, \"log_gdp\": 8.693161274238017}, {\"country\": \"Colombia\", \"region\": \"S. America\", \"gdppcap08\": 8885, \"polityIV\": 17.0, \"log_gdp\": 9.092119740588751}, {\"country\": \"Comoros\", \"region\": \"Africa\", \"gdppcap08\": 1169, \"polityIV\": 15.8, \"log_gdp\": 7.063903961472068}, {\"country\": \"Congo Brazzaville\", \"region\": \"Africa\", \"gdppcap08\": 3946, \"polityIV\": 6.0, \"log_gdp\": 8.28045768658256}, {\"country\": \"Congo Kinshasa\", \"region\": \"Africa\", \"gdppcap08\": 321, \"polityIV\": 15.0, \"log_gdp\": 5.771441123130016}, {\"country\": \"Costa Rica\", \"region\": \"S. America\", \"gdppcap08\": 11241, \"polityIV\": 20.0, \"log_gdp\": 9.327323087461798}, {\"country\": \"Croatia\", \"region\": \"C&E Europe\", \"gdppcap08\": 19084, \"polityIV\": 18.4, \"log_gdp\": 9.856605566635997}, {\"country\": \"Cuba\", \"region\": \"S. America\", \"gdppcap08\": 9500, \"polityIV\": 3.0, \"log_gdp\": 9.159047077588632}, {\"country\": \"Czech Republic\", \"region\": \"C&E Europe\", \"gdppcap08\": 24712, \"polityIV\": 20.0, \"log_gdp\": 10.115044234598418}, {\"country\": \"Denmark\", \"region\": \"Scandinavia\", \"gdppcap08\": 36607, \"polityIV\": 20.0, \"log_gdp\": 10.507994757932803}, {\"country\": \"Djibouti\", \"region\": \"Africa\", \"gdppcap08\": 2140, \"polityIV\": 12.0, \"log_gdp\": 7.668561108015897}, {\"country\": \"Ecuador\", \"region\": \"S. America\", \"gdppcap08\": 8009, \"polityIV\": 16.2, \"log_gdp\": 8.988321188323683}, {\"country\": \"Egypt\", \"region\": \"Middle East\", \"gdppcap08\": 5416, \"polityIV\": 4.0, \"log_gdp\": 8.59711281459211}, {\"country\": \"El Salvador\", \"region\": \"S. America\", \"gdppcap08\": 6794, \"polityIV\": 17.0, \"log_gdp\": 8.82379514872053}, {\"country\": \"Equatorial Guinea\", \"region\": \"Africa\", \"gdppcap08\": 33873, \"polityIV\": 5.0, \"log_gdp\": 10.430373515848633}, {\"country\": \"Eritrea\", \"region\": \"Africa\", \"gdppcap08\": 632, \"polityIV\": 3.0, \"log_gdp\": 6.448889394146858}, {\"country\": \"Estonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 20662, \"polityIV\": 16.0, \"log_gdp\": 9.936051543409391}, {\"country\": \"Fiji\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4382, \"polityIV\": 13.8, \"log_gdp\": 8.385260520155413}, {\"country\": \"Finland\", \"region\": \"Scandinavia\", \"gdppcap08\": 35427, \"polityIV\": 20.0, \"log_gdp\": 10.47522952026939}, {\"country\": \"France\", \"region\": \"W. Europe\", \"gdppcap08\": 34045, \"polityIV\": 19.0, \"log_gdp\": 10.435438457917067}, {\"country\": \"Gabon\", \"region\": \"Africa\", \"gdppcap08\": 14527, \"polityIV\": 6.0, \"log_gdp\": 9.583764265872883}, {\"country\": \"Gambia\", \"region\": \"Africa\", \"gdppcap08\": 1363, \"polityIV\": 5.0, \"log_gdp\": 7.217443431696533}, {\"country\": \"Georgia\", \"region\": \"C&E Europe\", \"gdppcap08\": 4896, \"polityIV\": 15.666667, \"log_gdp\": 8.496173824192162}, {\"country\": \"Germany\", \"region\": \"W. Europe\", \"gdppcap08\": 35613, \"polityIV\": 20.0, \"log_gdp\": 10.480466018721645}, {\"country\": \"Ghana\", \"region\": \"Africa\", \"gdppcap08\": 1452, \"polityIV\": 16.666667, \"log_gdp\": 7.280697195384741}, {\"country\": \"Greece\", \"region\": \"W. Europe\", \"gdppcap08\": 29361, \"polityIV\": 20.0, \"log_gdp\": 10.28742254209393}, {\"country\": \"Guatemala\", \"region\": \"S. America\", \"gdppcap08\": 4760, \"polityIV\": 18.0, \"log_gdp\": 8.468002947225466}, {\"country\": \"Guinea\", \"region\": \"Africa\", \"gdppcap08\": 1204, \"polityIV\": 9.0, \"log_gdp\": 7.093404625868766}, {\"country\": \"Guinea-Bissau\", \"region\": \"Africa\", \"gdppcap08\": 538, \"polityIV\": 11.0, \"log_gdp\": 6.2878585601617845}, {\"country\": \"Guyana\", \"region\": \"S. America\", \"gdppcap08\": 2542, \"polityIV\": 16.0, \"log_gdp\": 7.8407064517494}, {\"country\": \"Haiti\", \"region\": \"S. America\", \"gdppcap08\": 1177, \"polityIV\": 8.0, \"log_gdp\": 7.0707241072602764}, {\"country\": \"Honduras\", \"region\": \"S. America\", \"gdppcap08\": 3965, \"polityIV\": 17.0, \"log_gdp\": 8.285261134068948}, {\"country\": \"Hungary\", \"region\": \"C&E Europe\", \"gdppcap08\": 19330, \"polityIV\": 20.0, \"log_gdp\": 9.869413572202376}, {\"country\": \"India\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2972, \"polityIV\": 19.0, \"log_gdp\": 7.99699040583765}, {\"country\": \"Indonesia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3975, \"polityIV\": 16.666667, \"log_gdp\": 8.287780027088433}, {\"country\": \"Iran\", \"region\": \"Middle East\", \"gdppcap08\": 11666, \"polityIV\": 10.0, \"log_gdp\": 9.364433907313582}, {\"country\": \"Iraq\", \"region\": \"Middle East\", \"gdppcap08\": 3570, \"polityIV\": 1.0, \"log_gdp\": 8.180320874773685}, {\"country\": \"Ireland\", \"region\": \"W. Europe\", \"gdppcap08\": 44200, \"polityIV\": 20.0, \"log_gdp\": 10.696480068065789}, {\"country\": \"Israel\", \"region\": \"Middle East\", \"gdppcap08\": 27548, \"polityIV\": 20.0, \"log_gdp\": 10.223685216664588}, {\"country\": \"Italy\", \"region\": \"W. Europe\", \"gdppcap08\": 30756, \"polityIV\": 20.0, \"log_gdp\": 10.333840376152072}, {\"country\": \"Jamaica\", \"region\": \"S. America\", \"gdppcap08\": 7705, \"polityIV\": 19.0, \"log_gdp\": 8.949624747754216}, {\"country\": \"Japan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 34099, \"polityIV\": 20.0, \"log_gdp\": 10.43702333732841}, {\"country\": \"Jordan\", \"region\": \"Middle East\", \"gdppcap08\": 5283, \"polityIV\": 8.0, \"log_gdp\": 8.572249397164315}, {\"country\": \"Kazakhstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 11315, \"polityIV\": 4.0, \"log_gdp\": 9.333884558067638}, {\"country\": \"Kenya\", \"region\": \"Africa\", \"gdppcap08\": 1590, \"polityIV\": 18.0, \"log_gdp\": 7.371489295214277}, {\"country\": \"Korea South\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27939, \"polityIV\": 18.0, \"log_gdp\": 10.237778841189767}, {\"country\": \"Kuwait\", \"region\": \"Middle East\", \"gdppcap08\": 39914, \"polityIV\": 3.0, \"log_gdp\": 10.59448241852793}, {\"country\": \"Kyrgyzstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2188, \"polityIV\": 7.0, \"log_gdp\": 7.690743163541872}, {\"country\": \"Laos\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2134, \"polityIV\": 3.0, \"log_gdp\": 7.665753431861699}, {\"country\": \"Latvia\", \"region\": \"C&E Europe\", \"gdppcap08\": 17100, \"polityIV\": 18.0, \"log_gdp\": 9.746833742490752}, {\"country\": \"Lesotho\", \"region\": \"Africa\", \"gdppcap08\": 1588, \"polityIV\": 18.0, \"log_gdp\": 7.370230641807081}, {\"country\": \"Liberia\", \"region\": \"Africa\", \"gdppcap08\": 388, \"polityIV\": 10.0, \"log_gdp\": 5.961005339623274}, {\"country\": \"Libya\", \"region\": \"Middle East\", \"gdppcap08\": 15402, \"polityIV\": 3.0, \"log_gdp\": 9.642252650099195}, {\"country\": \"Lithuania\", \"region\": \"C&E Europe\", \"gdppcap08\": 18824, \"polityIV\": 20.0, \"log_gdp\": 9.842887930407198}, {\"country\": \"Macedonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 10041, \"polityIV\": 19.0, \"log_gdp\": 9.214431989879436}, {\"country\": \"Madagascar\", \"region\": \"Africa\", \"gdppcap08\": 1049, \"polityIV\": 17.0, \"log_gdp\": 6.955592608396297}, {\"country\": \"Malawi\", \"region\": \"Africa\", \"gdppcap08\": 837, \"polityIV\": 15.0, \"log_gdp\": 6.729824070489475}, {\"country\": \"Malaysia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 14215, \"polityIV\": 13.0, \"log_gdp\": 9.5620530240851}, {\"country\": \"Mali\", \"region\": \"Africa\", \"gdppcap08\": 1128, \"polityIV\": 16.0, \"log_gdp\": 7.028201432058005}, {\"country\": \"Mauritania\", \"region\": \"Africa\", \"gdppcap08\": 2052, \"polityIV\": 4.0, \"log_gdp\": 7.62657020629066}, {\"country\": \"Mauritius\", \"region\": \"Africa\", \"gdppcap08\": 12079, \"polityIV\": 20.0, \"log_gdp\": 9.399223686605279}, {\"country\": \"Mexico\", \"region\": \"N. America\", \"gdppcap08\": 14495, \"polityIV\": 18.0, \"log_gdp\": 9.581559041355757}, {\"country\": \"Moldova\", \"region\": \"C&E Europe\", \"gdppcap08\": 2925, \"polityIV\": 18.0, \"log_gdp\": 7.981049759665957}, {\"country\": \"Mongolia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3566, \"polityIV\": 20.0, \"log_gdp\": 8.179199798423086}, {\"country\": \"Morocco\", \"region\": \"Middle East\", \"gdppcap08\": 4388, \"polityIV\": 4.0, \"log_gdp\": 8.38662882139512}, {\"country\": \"Mozambique\", \"region\": \"Africa\", \"gdppcap08\": 855, \"polityIV\": 16.0, \"log_gdp\": 6.75110146893676}, {\"country\": \"Namibia\", \"region\": \"Africa\", \"gdppcap08\": 6343, \"polityIV\": 16.0, \"log_gdp\": 8.755107121633896}, {\"country\": \"Nepal\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1112, \"polityIV\": 4.0, \"log_gdp\": 7.013915474810528}, {\"country\": \"Netherlands\", \"region\": \"W. Europe\", \"gdppcap08\": 40849, \"polityIV\": 20.0, \"log_gdp\": 10.617637620184352}, {\"country\": \"New Zealand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27029, \"polityIV\": 20.0, \"log_gdp\": 10.20466564265568}, {\"country\": \"Nicaragua\", \"region\": \"S. America\", \"gdppcap08\": 2682, \"polityIV\": 18.0, \"log_gdp\": 7.894318063841624}, {\"country\": \"Niger\", \"region\": \"Africa\", \"gdppcap08\": 684, \"polityIV\": 15.333333, \"log_gdp\": 6.52795791762255}, {\"country\": \"Nigeria\", \"region\": \"Africa\", \"gdppcap08\": 2082, \"polityIV\": 14.0, \"log_gdp\": 7.641084249174914}, {\"country\": \"Norway\", \"region\": \"Scandinavia\", \"gdppcap08\": 58138, \"polityIV\": 20.0, \"log_gdp\": 10.97057477379638}, {\"country\": \"Oman\", \"region\": \"Middle East\", \"gdppcap08\": 22478, \"polityIV\": 2.0, \"log_gdp\": 10.020292332078212}, {\"country\": \"Pakistan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2644, \"polityIV\": 5.0, \"log_gdp\": 7.880048200971577}, {\"country\": \"Papua New Guinea\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2208, \"polityIV\": 20.0, \"log_gdp\": 7.699842407396986}, {\"country\": \"Paraguay\", \"region\": \"S. America\", \"gdppcap08\": 4709, \"polityIV\": 17.666667, \"log_gdp\": 8.457230850243555}, {\"country\": \"Peru\", \"region\": \"S. America\", \"gdppcap08\": 8507, \"polityIV\": 19.0, \"log_gdp\": 9.048644632975885}, {\"country\": \"Philippines\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3510, \"polityIV\": 18.0, \"log_gdp\": 8.163371316459912}, {\"country\": \"Poland\", \"region\": \"C&E Europe\", \"gdppcap08\": 17625, \"polityIV\": 20.0, \"log_gdp\": 9.777073627680469}, {\"country\": \"Portugal\", \"region\": \"W. Europe\", \"gdppcap08\": 23074, \"polityIV\": 20.0, \"log_gdp\": 10.046461721487235}, {\"country\": \"Qatar\", \"region\": \"Middle East\", \"gdppcap08\": 85868, \"polityIV\": 0.0, \"log_gdp\": 11.360566512373978}, {\"country\": \"Romania\", \"region\": \"C&E Europe\", \"gdppcap08\": 14065, \"polityIV\": 18.333333, \"log_gdp\": 9.551444720923957}, {\"country\": \"Russia\", \"region\": \"C&E Europe\", \"gdppcap08\": 16139, \"polityIV\": 17.0, \"log_gdp\": 9.688993982035823}, {\"country\": \"Rwanda\", \"region\": \"Africa\", \"gdppcap08\": 1022, \"polityIV\": 6.6666667, \"log_gdp\": 6.92951677076365}, {\"country\": \"Saudi Arabia\", \"region\": \"Middle East\", \"gdppcap08\": 23920, \"polityIV\": 0.0, \"log_gdp\": 10.082470208064567}, {\"country\": \"Senegal\", \"region\": \"Africa\", \"gdppcap08\": 1772, \"polityIV\": 18.0, \"log_gdp\": 7.4798641311650265}, {\"country\": \"Sierra Leone\", \"region\": \"Africa\", \"gdppcap08\": 766, \"polityIV\": 15.0, \"log_gdp\": 6.641182169740591}, {\"country\": \"Singapore\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 49284, \"polityIV\": 8.0, \"log_gdp\": 10.805354763744559}, {\"country\": \"Slovakia\", \"region\": \"C&E Europe\", \"gdppcap08\": 22081, \"polityIV\": 19.0, \"log_gdp\": 10.00247278922055}, {\"country\": \"Slovenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 27605, \"polityIV\": 20.0, \"log_gdp\": 10.225752194718146}, {\"country\": \"Solomon Islands\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2610, \"polityIV\": 18.0, \"log_gdp\": 7.867105500316739}, {\"country\": \"South Africa\", \"region\": \"Africa\", \"gdppcap08\": 10109, \"polityIV\": 19.0, \"log_gdp\": 9.221181395154058}, {\"country\": \"Spain\", \"region\": \"W. Europe\", \"gdppcap08\": 31954, \"polityIV\": 20.0, \"log_gdp\": 10.372052647587516}, {\"country\": \"Sri Lanka\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4560, \"polityIV\": 15.333333, \"log_gdp\": 8.425077902508432}, {\"country\": \"Sudan\", \"region\": \"Africa\", \"gdppcap08\": 2153, \"polityIV\": 4.0, \"log_gdp\": 7.674617497364363}, {\"country\": \"Swaziland\", \"region\": \"Africa\", \"gdppcap08\": 4928, \"polityIV\": 1.0, \"log_gdp\": 8.502688505213357}, {\"country\": \"Sweden\", \"region\": \"Scandinavia\", \"gdppcap08\": 37383, \"polityIV\": 20.0, \"log_gdp\": 10.528971334610977}, {\"country\": \"Switzerland\", \"region\": \"W. Europe\", \"gdppcap08\": 42536, \"polityIV\": 20.0, \"log_gdp\": 10.658106055184174}, {\"country\": \"Taiwan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 30881, \"polityIV\": 19.333333, \"log_gdp\": 10.33789638703407}, {\"country\": \"Tajikistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 1906, \"polityIV\": 7.6666667, \"log_gdp\": 7.552762084214147}, {\"country\": \"Tanzania\", \"region\": \"Africa\", \"gdppcap08\": 1263, \"polityIV\": 11.0, \"log_gdp\": 7.141245122350491}, {\"country\": \"Thailand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 7703, \"polityIV\": 19.0, \"log_gdp\": 8.949365142352965}, {\"country\": \"Togo\", \"region\": \"Africa\", \"gdppcap08\": 829, \"polityIV\": 8.0, \"log_gdp\": 6.720220155135295}, {\"country\": \"Tunisia\", \"region\": \"Middle East\", \"gdppcap08\": 7996, \"polityIV\": 6.0, \"log_gdp\": 8.98669669562029}, {\"country\": \"Turkey\", \"region\": \"Middle East\", \"gdppcap08\": 13920, \"polityIV\": 17.0, \"log_gdp\": 9.54108193388841}, {\"country\": \"Turkmenistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 6641, \"polityIV\": 1.0, \"log_gdp\": 8.801017833540714}, {\"country\": \"UAE\", \"region\": \"Middle East\", \"gdppcap08\": 38830, \"polityIV\": 2.0, \"log_gdp\": 10.566948422725712}, {\"country\": \"Uganda\", \"region\": \"Africa\", \"gdppcap08\": 1165, \"polityIV\": 6.0, \"log_gdp\": 7.060476365999801}, {\"country\": \"Ukraine\", \"region\": \"C&E Europe\", \"gdppcap08\": 7271, \"polityIV\": 16.0, \"log_gdp\": 8.891649112650057}, {\"country\": \"United Kingdom\", \"region\": \"W. Europe\", \"gdppcap08\": 35445, \"polityIV\": 20.0, \"log_gdp\": 10.475737478289117}, {\"country\": \"United States\", \"region\": \"N. America\", \"gdppcap08\": 46716, \"polityIV\": 20.0, \"log_gdp\": 10.751841997398456}, {\"country\": \"Uruguay\", \"region\": \"S. America\", \"gdppcap08\": 12734, \"polityIV\": 20.0, \"log_gdp\": 9.45203086057697}, {\"country\": \"Uzbekistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2656, \"polityIV\": 1.0, \"log_gdp\": 7.884576510596324}, {\"country\": \"Venezuela\", \"region\": \"S. America\", \"gdppcap08\": 12804, \"polityIV\": 16.0, \"log_gdp\": 9.457512901089753}, {\"country\": \"Vietnam\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2785, \"polityIV\": 3.0, \"log_gdp\": 7.932003152361385}, {\"country\": \"Yemen\", \"region\": \"Middle East\", \"gdppcap08\": 2400, \"polityIV\": 8.0, \"log_gdp\": 7.783224016336037}, {\"country\": \"Zambia\", \"region\": \"Africa\", \"gdppcap08\": 1356, \"polityIV\": 15.0, \"log_gdp\": 7.212294468500341}, {\"country\": \"Zimbabwe\", \"region\": \"Africa\", \"gdppcap08\": 188, \"polityIV\": 6.0, \"log_gdp\": 5.236441962829949}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.Chart(...)"
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "wdi[\"log_gdp\"] = np.log(wdi.gdppcap08)\n",
    "scatter = (\n",
    "    alt.Chart(wdi)\n",
    "    .mark_point()\n",
    "    .encode(x=alt.X(\"log_gdp\", scale=alt.Scale(zero=False)), y=\"polityIV\")\n",
    ")\n",
    "scatter\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Exercise 7\n",
    "\n",
    "Once you've applied that transformation, let's re-fit our model. Rather than imposing linearity this time, however, let's fit a model with a flexible functional form. Use `transform_loess()` to fit an updated model over your data. This is a form of local polynomial regression that is designed to be flexible in how it fits the data. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-509122a27907449bb6f173c20be2eade\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-509122a27907449bb6f173c20be2eade\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-509122a27907449bb6f173c20be2eade\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"layer\": [{\"mark\": \"point\", \"encoding\": {\"x\": {\"type\": \"quantitative\", \"field\": \"log_gdp\", \"scale\": {\"zero\": false}}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}}, {\"mark\": \"line\", \"encoding\": {\"x\": {\"type\": \"quantitative\", \"field\": \"log_gdp\", \"scale\": {\"zero\": false}}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}, \"transform\": [{\"loess\": \"polityIV\", \"on\": \"log_gdp\"}]}], \"data\": {\"name\": \"data-1e3b6cfdcd952e83b0293109cfc54611\"}, \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-1e3b6cfdcd952e83b0293109cfc54611\": [{\"country\": \"Albania\", \"region\": \"C&E Europe\", \"gdppcap08\": 7715, \"polityIV\": 17.8, \"log_gdp\": 8.950921764797261}, {\"country\": \"Algeria\", \"region\": \"Africa\", \"gdppcap08\": 8033, \"polityIV\": 10.0, \"log_gdp\": 8.991313336173812}, {\"country\": \"Angola\", \"region\": \"Africa\", \"gdppcap08\": 5899, \"polityIV\": 8.0, \"log_gdp\": 8.682538124003075}, {\"country\": \"Argentina\", \"region\": \"S. America\", \"gdppcap08\": 14333, \"polityIV\": 18.0, \"log_gdp\": 9.570319849923216}, {\"country\": \"Armenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 6070, \"polityIV\": 15.0, \"log_gdp\": 8.711113884053544}, {\"country\": \"Australia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 35677, \"polityIV\": 20.0, \"log_gdp\": 10.482261502441474}, {\"country\": \"Austria\", \"region\": \"W. Europe\", \"gdppcap08\": 38152, \"polityIV\": 20.0, \"log_gdp\": 10.54933345997806}, {\"country\": \"Azerbaijan\", \"region\": \"C&E Europe\", \"gdppcap08\": 8765, \"polityIV\": 3.0, \"log_gdp\": 9.078521797355334}, {\"country\": \"Bahrain\", \"region\": \"Middle East\", \"gdppcap08\": 34605, \"polityIV\": 3.0, \"log_gdp\": 10.451753459275963}, {\"country\": \"Bangladesh\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1334, \"polityIV\": 16.0, \"log_gdp\": 7.195937226475569}, {\"country\": \"Belarus\", \"region\": \"C&E Europe\", \"gdppcap08\": 12261, \"polityIV\": 3.0, \"log_gdp\": 9.414178772232386}, {\"country\": \"Belgium\", \"region\": \"W. Europe\", \"gdppcap08\": 34493, \"polityIV\": 20.0, \"log_gdp\": 10.44851168388203}, {\"country\": \"Benin\", \"region\": \"Africa\", \"gdppcap08\": 1468, \"polityIV\": 16.2, \"log_gdp\": 7.291656209174461}, {\"country\": \"Bhutan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4755, \"polityIV\": 2.0, \"log_gdp\": 8.46695197497949}, {\"country\": \"Bolivia\", \"region\": \"S. America\", \"gdppcap08\": 4278, \"polityIV\": 18.2, \"log_gdp\": 8.361240889642351}, {\"country\": \"Botswana\", \"region\": \"Africa\", \"gdppcap08\": 13392, \"polityIV\": 19.0, \"log_gdp\": 9.502412792729256}, {\"country\": \"Brazil\", \"region\": \"S. America\", \"gdppcap08\": 10296, \"polityIV\": 18.0, \"log_gdp\": 9.239510749275963}, {\"country\": \"Bulgaria\", \"region\": \"C&E Europe\", \"gdppcap08\": 12393, \"polityIV\": 19.0, \"log_gdp\": 9.424887076064874}, {\"country\": \"Burkina Faso\", \"region\": \"Africa\", \"gdppcap08\": 1161, \"polityIV\": 10.0, \"log_gdp\": 7.057036981697891}, {\"country\": \"Cambodia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1905, \"polityIV\": 12.0, \"log_gdp\": 7.552237287560802}, {\"country\": \"Cameroon\", \"region\": \"Africa\", \"gdppcap08\": 2215, \"polityIV\": 6.0, \"log_gdp\": 7.703007682479236}, {\"country\": \"Canada\", \"region\": \"N. America\", \"gdppcap08\": 36444, \"polityIV\": 20.0, \"log_gdp\": 10.50353211483375}, {\"country\": \"Central African Republic\", \"region\": \"Africa\", \"gdppcap08\": 736, \"polityIV\": 10.2, \"log_gdp\": 6.601230118728877}, {\"country\": \"Chad\", \"region\": \"Africa\", \"gdppcap08\": 1455, \"polityIV\": 8.0, \"log_gdp\": 7.282761179605593}, {\"country\": \"Chile\", \"region\": \"S. America\", \"gdppcap08\": 14465, \"polityIV\": 19.2, \"log_gdp\": 9.579487217410236}, {\"country\": \"China\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 5962, \"polityIV\": 3.0, \"log_gdp\": 8.693161274238017}, {\"country\": \"Colombia\", \"region\": \"S. America\", \"gdppcap08\": 8885, \"polityIV\": 17.0, \"log_gdp\": 9.092119740588751}, {\"country\": \"Comoros\", \"region\": \"Africa\", \"gdppcap08\": 1169, \"polityIV\": 15.8, \"log_gdp\": 7.063903961472068}, {\"country\": \"Congo Brazzaville\", \"region\": \"Africa\", \"gdppcap08\": 3946, \"polityIV\": 6.0, \"log_gdp\": 8.28045768658256}, {\"country\": \"Congo Kinshasa\", \"region\": \"Africa\", \"gdppcap08\": 321, \"polityIV\": 15.0, \"log_gdp\": 5.771441123130016}, {\"country\": \"Costa Rica\", \"region\": \"S. America\", \"gdppcap08\": 11241, \"polityIV\": 20.0, \"log_gdp\": 9.327323087461798}, {\"country\": \"Croatia\", \"region\": \"C&E Europe\", \"gdppcap08\": 19084, \"polityIV\": 18.4, \"log_gdp\": 9.856605566635997}, {\"country\": \"Cuba\", \"region\": \"S. America\", \"gdppcap08\": 9500, \"polityIV\": 3.0, \"log_gdp\": 9.159047077588632}, {\"country\": \"Czech Republic\", \"region\": \"C&E Europe\", \"gdppcap08\": 24712, \"polityIV\": 20.0, \"log_gdp\": 10.115044234598418}, {\"country\": \"Denmark\", \"region\": \"Scandinavia\", \"gdppcap08\": 36607, \"polityIV\": 20.0, \"log_gdp\": 10.507994757932803}, {\"country\": \"Djibouti\", \"region\": \"Africa\", \"gdppcap08\": 2140, \"polityIV\": 12.0, \"log_gdp\": 7.668561108015897}, {\"country\": \"Ecuador\", \"region\": \"S. America\", \"gdppcap08\": 8009, \"polityIV\": 16.2, \"log_gdp\": 8.988321188323683}, {\"country\": \"Egypt\", \"region\": \"Middle East\", \"gdppcap08\": 5416, \"polityIV\": 4.0, \"log_gdp\": 8.59711281459211}, {\"country\": \"El Salvador\", \"region\": \"S. America\", \"gdppcap08\": 6794, \"polityIV\": 17.0, \"log_gdp\": 8.82379514872053}, {\"country\": \"Equatorial Guinea\", \"region\": \"Africa\", \"gdppcap08\": 33873, \"polityIV\": 5.0, \"log_gdp\": 10.430373515848633}, {\"country\": \"Eritrea\", \"region\": \"Africa\", \"gdppcap08\": 632, \"polityIV\": 3.0, \"log_gdp\": 6.448889394146858}, {\"country\": \"Estonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 20662, \"polityIV\": 16.0, \"log_gdp\": 9.936051543409391}, {\"country\": \"Fiji\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4382, \"polityIV\": 13.8, \"log_gdp\": 8.385260520155413}, {\"country\": \"Finland\", \"region\": \"Scandinavia\", \"gdppcap08\": 35427, \"polityIV\": 20.0, \"log_gdp\": 10.47522952026939}, {\"country\": \"France\", \"region\": \"W. Europe\", \"gdppcap08\": 34045, \"polityIV\": 19.0, \"log_gdp\": 10.435438457917067}, {\"country\": \"Gabon\", \"region\": \"Africa\", \"gdppcap08\": 14527, \"polityIV\": 6.0, \"log_gdp\": 9.583764265872883}, {\"country\": \"Gambia\", \"region\": \"Africa\", \"gdppcap08\": 1363, \"polityIV\": 5.0, \"log_gdp\": 7.217443431696533}, {\"country\": \"Georgia\", \"region\": \"C&E Europe\", \"gdppcap08\": 4896, \"polityIV\": 15.666667, \"log_gdp\": 8.496173824192162}, {\"country\": \"Germany\", \"region\": \"W. Europe\", \"gdppcap08\": 35613, \"polityIV\": 20.0, \"log_gdp\": 10.480466018721645}, {\"country\": \"Ghana\", \"region\": \"Africa\", \"gdppcap08\": 1452, \"polityIV\": 16.666667, \"log_gdp\": 7.280697195384741}, {\"country\": \"Greece\", \"region\": \"W. Europe\", \"gdppcap08\": 29361, \"polityIV\": 20.0, \"log_gdp\": 10.28742254209393}, {\"country\": \"Guatemala\", \"region\": \"S. America\", \"gdppcap08\": 4760, \"polityIV\": 18.0, \"log_gdp\": 8.468002947225466}, {\"country\": \"Guinea\", \"region\": \"Africa\", \"gdppcap08\": 1204, \"polityIV\": 9.0, \"log_gdp\": 7.093404625868766}, {\"country\": \"Guinea-Bissau\", \"region\": \"Africa\", \"gdppcap08\": 538, \"polityIV\": 11.0, \"log_gdp\": 6.2878585601617845}, {\"country\": \"Guyana\", \"region\": \"S. America\", \"gdppcap08\": 2542, \"polityIV\": 16.0, \"log_gdp\": 7.8407064517494}, {\"country\": \"Haiti\", \"region\": \"S. America\", \"gdppcap08\": 1177, \"polityIV\": 8.0, \"log_gdp\": 7.0707241072602764}, {\"country\": \"Honduras\", \"region\": \"S. America\", \"gdppcap08\": 3965, \"polityIV\": 17.0, \"log_gdp\": 8.285261134068948}, {\"country\": \"Hungary\", \"region\": \"C&E Europe\", \"gdppcap08\": 19330, \"polityIV\": 20.0, \"log_gdp\": 9.869413572202376}, {\"country\": \"India\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2972, \"polityIV\": 19.0, \"log_gdp\": 7.99699040583765}, {\"country\": \"Indonesia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3975, \"polityIV\": 16.666667, \"log_gdp\": 8.287780027088433}, {\"country\": \"Iran\", \"region\": \"Middle East\", \"gdppcap08\": 11666, \"polityIV\": 10.0, \"log_gdp\": 9.364433907313582}, {\"country\": \"Iraq\", \"region\": \"Middle East\", \"gdppcap08\": 3570, \"polityIV\": 1.0, \"log_gdp\": 8.180320874773685}, {\"country\": \"Ireland\", \"region\": \"W. Europe\", \"gdppcap08\": 44200, \"polityIV\": 20.0, \"log_gdp\": 10.696480068065789}, {\"country\": \"Israel\", \"region\": \"Middle East\", \"gdppcap08\": 27548, \"polityIV\": 20.0, \"log_gdp\": 10.223685216664588}, {\"country\": \"Italy\", \"region\": \"W. Europe\", \"gdppcap08\": 30756, \"polityIV\": 20.0, \"log_gdp\": 10.333840376152072}, {\"country\": \"Jamaica\", \"region\": \"S. America\", \"gdppcap08\": 7705, \"polityIV\": 19.0, \"log_gdp\": 8.949624747754216}, {\"country\": \"Japan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 34099, \"polityIV\": 20.0, \"log_gdp\": 10.43702333732841}, {\"country\": \"Jordan\", \"region\": \"Middle East\", \"gdppcap08\": 5283, \"polityIV\": 8.0, \"log_gdp\": 8.572249397164315}, {\"country\": \"Kazakhstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 11315, \"polityIV\": 4.0, \"log_gdp\": 9.333884558067638}, {\"country\": \"Kenya\", \"region\": \"Africa\", \"gdppcap08\": 1590, \"polityIV\": 18.0, \"log_gdp\": 7.371489295214277}, {\"country\": \"Korea South\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27939, \"polityIV\": 18.0, \"log_gdp\": 10.237778841189767}, {\"country\": \"Kuwait\", \"region\": \"Middle East\", \"gdppcap08\": 39914, \"polityIV\": 3.0, \"log_gdp\": 10.59448241852793}, {\"country\": \"Kyrgyzstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2188, \"polityIV\": 7.0, \"log_gdp\": 7.690743163541872}, {\"country\": \"Laos\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2134, \"polityIV\": 3.0, \"log_gdp\": 7.665753431861699}, {\"country\": \"Latvia\", \"region\": \"C&E Europe\", \"gdppcap08\": 17100, \"polityIV\": 18.0, \"log_gdp\": 9.746833742490752}, {\"country\": \"Lesotho\", \"region\": \"Africa\", \"gdppcap08\": 1588, \"polityIV\": 18.0, \"log_gdp\": 7.370230641807081}, {\"country\": \"Liberia\", \"region\": \"Africa\", \"gdppcap08\": 388, \"polityIV\": 10.0, \"log_gdp\": 5.961005339623274}, {\"country\": \"Libya\", \"region\": \"Middle East\", \"gdppcap08\": 15402, \"polityIV\": 3.0, \"log_gdp\": 9.642252650099195}, {\"country\": \"Lithuania\", \"region\": \"C&E Europe\", \"gdppcap08\": 18824, \"polityIV\": 20.0, \"log_gdp\": 9.842887930407198}, {\"country\": \"Macedonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 10041, \"polityIV\": 19.0, \"log_gdp\": 9.214431989879436}, {\"country\": \"Madagascar\", \"region\": \"Africa\", \"gdppcap08\": 1049, \"polityIV\": 17.0, \"log_gdp\": 6.955592608396297}, {\"country\": \"Malawi\", \"region\": \"Africa\", \"gdppcap08\": 837, \"polityIV\": 15.0, \"log_gdp\": 6.729824070489475}, {\"country\": \"Malaysia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 14215, \"polityIV\": 13.0, \"log_gdp\": 9.5620530240851}, {\"country\": \"Mali\", \"region\": \"Africa\", \"gdppcap08\": 1128, \"polityIV\": 16.0, \"log_gdp\": 7.028201432058005}, {\"country\": \"Mauritania\", \"region\": \"Africa\", \"gdppcap08\": 2052, \"polityIV\": 4.0, \"log_gdp\": 7.62657020629066}, {\"country\": \"Mauritius\", \"region\": \"Africa\", \"gdppcap08\": 12079, \"polityIV\": 20.0, \"log_gdp\": 9.399223686605279}, {\"country\": \"Mexico\", \"region\": \"N. America\", \"gdppcap08\": 14495, \"polityIV\": 18.0, \"log_gdp\": 9.581559041355757}, {\"country\": \"Moldova\", \"region\": \"C&E Europe\", \"gdppcap08\": 2925, \"polityIV\": 18.0, \"log_gdp\": 7.981049759665957}, {\"country\": \"Mongolia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3566, \"polityIV\": 20.0, \"log_gdp\": 8.179199798423086}, {\"country\": \"Morocco\", \"region\": \"Middle East\", \"gdppcap08\": 4388, \"polityIV\": 4.0, \"log_gdp\": 8.38662882139512}, {\"country\": \"Mozambique\", \"region\": \"Africa\", \"gdppcap08\": 855, \"polityIV\": 16.0, \"log_gdp\": 6.75110146893676}, {\"country\": \"Namibia\", \"region\": \"Africa\", \"gdppcap08\": 6343, \"polityIV\": 16.0, \"log_gdp\": 8.755107121633896}, {\"country\": \"Nepal\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1112, \"polityIV\": 4.0, \"log_gdp\": 7.013915474810528}, {\"country\": \"Netherlands\", \"region\": \"W. Europe\", \"gdppcap08\": 40849, \"polityIV\": 20.0, \"log_gdp\": 10.617637620184352}, {\"country\": \"New Zealand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27029, \"polityIV\": 20.0, \"log_gdp\": 10.20466564265568}, {\"country\": \"Nicaragua\", \"region\": \"S. America\", \"gdppcap08\": 2682, \"polityIV\": 18.0, \"log_gdp\": 7.894318063841624}, {\"country\": \"Niger\", \"region\": \"Africa\", \"gdppcap08\": 684, \"polityIV\": 15.333333, \"log_gdp\": 6.52795791762255}, {\"country\": \"Nigeria\", \"region\": \"Africa\", \"gdppcap08\": 2082, \"polityIV\": 14.0, \"log_gdp\": 7.641084249174914}, {\"country\": \"Norway\", \"region\": \"Scandinavia\", \"gdppcap08\": 58138, \"polityIV\": 20.0, \"log_gdp\": 10.97057477379638}, {\"country\": \"Oman\", \"region\": \"Middle East\", \"gdppcap08\": 22478, \"polityIV\": 2.0, \"log_gdp\": 10.020292332078212}, {\"country\": \"Pakistan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2644, \"polityIV\": 5.0, \"log_gdp\": 7.880048200971577}, {\"country\": \"Papua New Guinea\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2208, \"polityIV\": 20.0, \"log_gdp\": 7.699842407396986}, {\"country\": \"Paraguay\", \"region\": \"S. America\", \"gdppcap08\": 4709, \"polityIV\": 17.666667, \"log_gdp\": 8.457230850243555}, {\"country\": \"Peru\", \"region\": \"S. America\", \"gdppcap08\": 8507, \"polityIV\": 19.0, \"log_gdp\": 9.048644632975885}, {\"country\": \"Philippines\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3510, \"polityIV\": 18.0, \"log_gdp\": 8.163371316459912}, {\"country\": \"Poland\", \"region\": \"C&E Europe\", \"gdppcap08\": 17625, \"polityIV\": 20.0, \"log_gdp\": 9.777073627680469}, {\"country\": \"Portugal\", \"region\": \"W. Europe\", \"gdppcap08\": 23074, \"polityIV\": 20.0, \"log_gdp\": 10.046461721487235}, {\"country\": \"Qatar\", \"region\": \"Middle East\", \"gdppcap08\": 85868, \"polityIV\": 0.0, \"log_gdp\": 11.360566512373978}, {\"country\": \"Romania\", \"region\": \"C&E Europe\", \"gdppcap08\": 14065, \"polityIV\": 18.333333, \"log_gdp\": 9.551444720923957}, {\"country\": \"Russia\", \"region\": \"C&E Europe\", \"gdppcap08\": 16139, \"polityIV\": 17.0, \"log_gdp\": 9.688993982035823}, {\"country\": \"Rwanda\", \"region\": \"Africa\", \"gdppcap08\": 1022, \"polityIV\": 6.6666667, \"log_gdp\": 6.92951677076365}, {\"country\": \"Saudi Arabia\", \"region\": \"Middle East\", \"gdppcap08\": 23920, \"polityIV\": 0.0, \"log_gdp\": 10.082470208064567}, {\"country\": \"Senegal\", \"region\": \"Africa\", \"gdppcap08\": 1772, \"polityIV\": 18.0, \"log_gdp\": 7.4798641311650265}, {\"country\": \"Sierra Leone\", \"region\": \"Africa\", \"gdppcap08\": 766, \"polityIV\": 15.0, \"log_gdp\": 6.641182169740591}, {\"country\": \"Singapore\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 49284, \"polityIV\": 8.0, \"log_gdp\": 10.805354763744559}, {\"country\": \"Slovakia\", \"region\": \"C&E Europe\", \"gdppcap08\": 22081, \"polityIV\": 19.0, \"log_gdp\": 10.00247278922055}, {\"country\": \"Slovenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 27605, \"polityIV\": 20.0, \"log_gdp\": 10.225752194718146}, {\"country\": \"Solomon Islands\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2610, \"polityIV\": 18.0, \"log_gdp\": 7.867105500316739}, {\"country\": \"South Africa\", \"region\": \"Africa\", \"gdppcap08\": 10109, \"polityIV\": 19.0, \"log_gdp\": 9.221181395154058}, {\"country\": \"Spain\", \"region\": \"W. Europe\", \"gdppcap08\": 31954, \"polityIV\": 20.0, \"log_gdp\": 10.372052647587516}, {\"country\": \"Sri Lanka\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4560, \"polityIV\": 15.333333, \"log_gdp\": 8.425077902508432}, {\"country\": \"Sudan\", \"region\": \"Africa\", \"gdppcap08\": 2153, \"polityIV\": 4.0, \"log_gdp\": 7.674617497364363}, {\"country\": \"Swaziland\", \"region\": \"Africa\", \"gdppcap08\": 4928, \"polityIV\": 1.0, \"log_gdp\": 8.502688505213357}, {\"country\": \"Sweden\", \"region\": \"Scandinavia\", \"gdppcap08\": 37383, \"polityIV\": 20.0, \"log_gdp\": 10.528971334610977}, {\"country\": \"Switzerland\", \"region\": \"W. Europe\", \"gdppcap08\": 42536, \"polityIV\": 20.0, \"log_gdp\": 10.658106055184174}, {\"country\": \"Taiwan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 30881, \"polityIV\": 19.333333, \"log_gdp\": 10.33789638703407}, {\"country\": \"Tajikistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 1906, \"polityIV\": 7.6666667, \"log_gdp\": 7.552762084214147}, {\"country\": \"Tanzania\", \"region\": \"Africa\", \"gdppcap08\": 1263, \"polityIV\": 11.0, \"log_gdp\": 7.141245122350491}, {\"country\": \"Thailand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 7703, \"polityIV\": 19.0, \"log_gdp\": 8.949365142352965}, {\"country\": \"Togo\", \"region\": \"Africa\", \"gdppcap08\": 829, \"polityIV\": 8.0, \"log_gdp\": 6.720220155135295}, {\"country\": \"Tunisia\", \"region\": \"Middle East\", \"gdppcap08\": 7996, \"polityIV\": 6.0, \"log_gdp\": 8.98669669562029}, {\"country\": \"Turkey\", \"region\": \"Middle East\", \"gdppcap08\": 13920, \"polityIV\": 17.0, \"log_gdp\": 9.54108193388841}, {\"country\": \"Turkmenistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 6641, \"polityIV\": 1.0, \"log_gdp\": 8.801017833540714}, {\"country\": \"UAE\", \"region\": \"Middle East\", \"gdppcap08\": 38830, \"polityIV\": 2.0, \"log_gdp\": 10.566948422725712}, {\"country\": \"Uganda\", \"region\": \"Africa\", \"gdppcap08\": 1165, \"polityIV\": 6.0, \"log_gdp\": 7.060476365999801}, {\"country\": \"Ukraine\", \"region\": \"C&E Europe\", \"gdppcap08\": 7271, \"polityIV\": 16.0, \"log_gdp\": 8.891649112650057}, {\"country\": \"United Kingdom\", \"region\": \"W. Europe\", \"gdppcap08\": 35445, \"polityIV\": 20.0, \"log_gdp\": 10.475737478289117}, {\"country\": \"United States\", \"region\": \"N. America\", \"gdppcap08\": 46716, \"polityIV\": 20.0, \"log_gdp\": 10.751841997398456}, {\"country\": \"Uruguay\", \"region\": \"S. America\", \"gdppcap08\": 12734, \"polityIV\": 20.0, \"log_gdp\": 9.45203086057697}, {\"country\": \"Uzbekistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2656, \"polityIV\": 1.0, \"log_gdp\": 7.884576510596324}, {\"country\": \"Venezuela\", \"region\": \"S. America\", \"gdppcap08\": 12804, \"polityIV\": 16.0, \"log_gdp\": 9.457512901089753}, {\"country\": \"Vietnam\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2785, \"polityIV\": 3.0, \"log_gdp\": 7.932003152361385}, {\"country\": \"Yemen\", \"region\": \"Middle East\", \"gdppcap08\": 2400, \"polityIV\": 8.0, \"log_gdp\": 7.783224016336037}, {\"country\": \"Zambia\", \"region\": \"Africa\", \"gdppcap08\": 1356, \"polityIV\": 15.0, \"log_gdp\": 7.212294468500341}, {\"country\": \"Zimbabwe\", \"region\": \"Africa\", \"gdppcap08\": 188, \"polityIV\": 6.0, \"log_gdp\": 5.236441962829949}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.LayerChart(...)"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "import numpy as np\n",
    "loess = scatter.transform_loess(\"log_gdp\", \"polityIV\").mark_line()\n",
    "scatter + loess"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Exercise 8\n",
    "\n",
    "This does seem to fit the data better, but there seem to be quite a few outliers in the bottom right. Who is that? Add text labels to the points on your graph with country names."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-4ae0978952f1456eab7b57513e572cd4\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-4ae0978952f1456eab7b57513e572cd4\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-4ae0978952f1456eab7b57513e572cd4\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"layer\": [{\"mark\": \"point\", \"encoding\": {\"x\": {\"type\": \"quantitative\", \"field\": \"log_gdp\", \"scale\": {\"zero\": false}}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}}, {\"mark\": \"line\", \"encoding\": {\"x\": {\"type\": \"quantitative\", \"field\": \"log_gdp\", \"scale\": {\"zero\": false}}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}, \"transform\": [{\"loess\": \"polityIV\", \"on\": \"log_gdp\"}]}, {\"mark\": {\"type\": \"text\", \"dy\": -8, \"size\": 8}, \"encoding\": {\"text\": {\"type\": \"nominal\", \"field\": \"country\"}, \"x\": {\"type\": \"quantitative\", \"field\": \"log_gdp\", \"scale\": {\"zero\": false}}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}}], \"data\": {\"name\": \"data-1e3b6cfdcd952e83b0293109cfc54611\"}, \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-1e3b6cfdcd952e83b0293109cfc54611\": [{\"country\": \"Albania\", \"region\": \"C&E Europe\", \"gdppcap08\": 7715, \"polityIV\": 17.8, \"log_gdp\": 8.950921764797261}, {\"country\": \"Algeria\", \"region\": \"Africa\", \"gdppcap08\": 8033, \"polityIV\": 10.0, \"log_gdp\": 8.991313336173812}, {\"country\": \"Angola\", \"region\": \"Africa\", \"gdppcap08\": 5899, \"polityIV\": 8.0, \"log_gdp\": 8.682538124003075}, {\"country\": \"Argentina\", \"region\": \"S. America\", \"gdppcap08\": 14333, \"polityIV\": 18.0, \"log_gdp\": 9.570319849923216}, {\"country\": \"Armenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 6070, \"polityIV\": 15.0, \"log_gdp\": 8.711113884053544}, {\"country\": \"Australia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 35677, \"polityIV\": 20.0, \"log_gdp\": 10.482261502441474}, {\"country\": \"Austria\", \"region\": \"W. Europe\", \"gdppcap08\": 38152, \"polityIV\": 20.0, \"log_gdp\": 10.54933345997806}, {\"country\": \"Azerbaijan\", \"region\": \"C&E Europe\", \"gdppcap08\": 8765, \"polityIV\": 3.0, \"log_gdp\": 9.078521797355334}, {\"country\": \"Bahrain\", \"region\": \"Middle East\", \"gdppcap08\": 34605, \"polityIV\": 3.0, \"log_gdp\": 10.451753459275963}, {\"country\": \"Bangladesh\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1334, \"polityIV\": 16.0, \"log_gdp\": 7.195937226475569}, {\"country\": \"Belarus\", \"region\": \"C&E Europe\", \"gdppcap08\": 12261, \"polityIV\": 3.0, \"log_gdp\": 9.414178772232386}, {\"country\": \"Belgium\", \"region\": \"W. Europe\", \"gdppcap08\": 34493, \"polityIV\": 20.0, \"log_gdp\": 10.44851168388203}, {\"country\": \"Benin\", \"region\": \"Africa\", \"gdppcap08\": 1468, \"polityIV\": 16.2, \"log_gdp\": 7.291656209174461}, {\"country\": \"Bhutan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4755, \"polityIV\": 2.0, \"log_gdp\": 8.46695197497949}, {\"country\": \"Bolivia\", \"region\": \"S. America\", \"gdppcap08\": 4278, \"polityIV\": 18.2, \"log_gdp\": 8.361240889642351}, {\"country\": \"Botswana\", \"region\": \"Africa\", \"gdppcap08\": 13392, \"polityIV\": 19.0, \"log_gdp\": 9.502412792729256}, {\"country\": \"Brazil\", \"region\": \"S. America\", \"gdppcap08\": 10296, \"polityIV\": 18.0, \"log_gdp\": 9.239510749275963}, {\"country\": \"Bulgaria\", \"region\": \"C&E Europe\", \"gdppcap08\": 12393, \"polityIV\": 19.0, \"log_gdp\": 9.424887076064874}, {\"country\": \"Burkina Faso\", \"region\": \"Africa\", \"gdppcap08\": 1161, \"polityIV\": 10.0, \"log_gdp\": 7.057036981697891}, {\"country\": \"Cambodia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1905, \"polityIV\": 12.0, \"log_gdp\": 7.552237287560802}, {\"country\": \"Cameroon\", \"region\": \"Africa\", \"gdppcap08\": 2215, \"polityIV\": 6.0, \"log_gdp\": 7.703007682479236}, {\"country\": \"Canada\", \"region\": \"N. America\", \"gdppcap08\": 36444, \"polityIV\": 20.0, \"log_gdp\": 10.50353211483375}, {\"country\": \"Central African Republic\", \"region\": \"Africa\", \"gdppcap08\": 736, \"polityIV\": 10.2, \"log_gdp\": 6.601230118728877}, {\"country\": \"Chad\", \"region\": \"Africa\", \"gdppcap08\": 1455, \"polityIV\": 8.0, \"log_gdp\": 7.282761179605593}, {\"country\": \"Chile\", \"region\": \"S. America\", \"gdppcap08\": 14465, \"polityIV\": 19.2, \"log_gdp\": 9.579487217410236}, {\"country\": \"China\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 5962, \"polityIV\": 3.0, \"log_gdp\": 8.693161274238017}, {\"country\": \"Colombia\", \"region\": \"S. America\", \"gdppcap08\": 8885, \"polityIV\": 17.0, \"log_gdp\": 9.092119740588751}, {\"country\": \"Comoros\", \"region\": \"Africa\", \"gdppcap08\": 1169, \"polityIV\": 15.8, \"log_gdp\": 7.063903961472068}, {\"country\": \"Congo Brazzaville\", \"region\": \"Africa\", \"gdppcap08\": 3946, \"polityIV\": 6.0, \"log_gdp\": 8.28045768658256}, {\"country\": \"Congo Kinshasa\", \"region\": \"Africa\", \"gdppcap08\": 321, \"polityIV\": 15.0, \"log_gdp\": 5.771441123130016}, {\"country\": \"Costa Rica\", \"region\": \"S. America\", \"gdppcap08\": 11241, \"polityIV\": 20.0, \"log_gdp\": 9.327323087461798}, {\"country\": \"Croatia\", \"region\": \"C&E Europe\", \"gdppcap08\": 19084, \"polityIV\": 18.4, \"log_gdp\": 9.856605566635997}, {\"country\": \"Cuba\", \"region\": \"S. America\", \"gdppcap08\": 9500, \"polityIV\": 3.0, \"log_gdp\": 9.159047077588632}, {\"country\": \"Czech Republic\", \"region\": \"C&E Europe\", \"gdppcap08\": 24712, \"polityIV\": 20.0, \"log_gdp\": 10.115044234598418}, {\"country\": \"Denmark\", \"region\": \"Scandinavia\", \"gdppcap08\": 36607, \"polityIV\": 20.0, \"log_gdp\": 10.507994757932803}, {\"country\": \"Djibouti\", \"region\": \"Africa\", \"gdppcap08\": 2140, \"polityIV\": 12.0, \"log_gdp\": 7.668561108015897}, {\"country\": \"Ecuador\", \"region\": \"S. America\", \"gdppcap08\": 8009, \"polityIV\": 16.2, \"log_gdp\": 8.988321188323683}, {\"country\": \"Egypt\", \"region\": \"Middle East\", \"gdppcap08\": 5416, \"polityIV\": 4.0, \"log_gdp\": 8.59711281459211}, {\"country\": \"El Salvador\", \"region\": \"S. America\", \"gdppcap08\": 6794, \"polityIV\": 17.0, \"log_gdp\": 8.82379514872053}, {\"country\": \"Equatorial Guinea\", \"region\": \"Africa\", \"gdppcap08\": 33873, \"polityIV\": 5.0, \"log_gdp\": 10.430373515848633}, {\"country\": \"Eritrea\", \"region\": \"Africa\", \"gdppcap08\": 632, \"polityIV\": 3.0, \"log_gdp\": 6.448889394146858}, {\"country\": \"Estonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 20662, \"polityIV\": 16.0, \"log_gdp\": 9.936051543409391}, {\"country\": \"Fiji\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4382, \"polityIV\": 13.8, \"log_gdp\": 8.385260520155413}, {\"country\": \"Finland\", \"region\": \"Scandinavia\", \"gdppcap08\": 35427, \"polityIV\": 20.0, \"log_gdp\": 10.47522952026939}, {\"country\": \"France\", \"region\": \"W. Europe\", \"gdppcap08\": 34045, \"polityIV\": 19.0, \"log_gdp\": 10.435438457917067}, {\"country\": \"Gabon\", \"region\": \"Africa\", \"gdppcap08\": 14527, \"polityIV\": 6.0, \"log_gdp\": 9.583764265872883}, {\"country\": \"Gambia\", \"region\": \"Africa\", \"gdppcap08\": 1363, \"polityIV\": 5.0, \"log_gdp\": 7.217443431696533}, {\"country\": \"Georgia\", \"region\": \"C&E Europe\", \"gdppcap08\": 4896, \"polityIV\": 15.666667, \"log_gdp\": 8.496173824192162}, {\"country\": \"Germany\", \"region\": \"W. Europe\", \"gdppcap08\": 35613, \"polityIV\": 20.0, \"log_gdp\": 10.480466018721645}, {\"country\": \"Ghana\", \"region\": \"Africa\", \"gdppcap08\": 1452, \"polityIV\": 16.666667, \"log_gdp\": 7.280697195384741}, {\"country\": \"Greece\", \"region\": \"W. Europe\", \"gdppcap08\": 29361, \"polityIV\": 20.0, \"log_gdp\": 10.28742254209393}, {\"country\": \"Guatemala\", \"region\": \"S. America\", \"gdppcap08\": 4760, \"polityIV\": 18.0, \"log_gdp\": 8.468002947225466}, {\"country\": \"Guinea\", \"region\": \"Africa\", \"gdppcap08\": 1204, \"polityIV\": 9.0, \"log_gdp\": 7.093404625868766}, {\"country\": \"Guinea-Bissau\", \"region\": \"Africa\", \"gdppcap08\": 538, \"polityIV\": 11.0, \"log_gdp\": 6.2878585601617845}, {\"country\": \"Guyana\", \"region\": \"S. America\", \"gdppcap08\": 2542, \"polityIV\": 16.0, \"log_gdp\": 7.8407064517494}, {\"country\": \"Haiti\", \"region\": \"S. America\", \"gdppcap08\": 1177, \"polityIV\": 8.0, \"log_gdp\": 7.0707241072602764}, {\"country\": \"Honduras\", \"region\": \"S. America\", \"gdppcap08\": 3965, \"polityIV\": 17.0, \"log_gdp\": 8.285261134068948}, {\"country\": \"Hungary\", \"region\": \"C&E Europe\", \"gdppcap08\": 19330, \"polityIV\": 20.0, \"log_gdp\": 9.869413572202376}, {\"country\": \"India\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2972, \"polityIV\": 19.0, \"log_gdp\": 7.99699040583765}, {\"country\": \"Indonesia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3975, \"polityIV\": 16.666667, \"log_gdp\": 8.287780027088433}, {\"country\": \"Iran\", \"region\": \"Middle East\", \"gdppcap08\": 11666, \"polityIV\": 10.0, \"log_gdp\": 9.364433907313582}, {\"country\": \"Iraq\", \"region\": \"Middle East\", \"gdppcap08\": 3570, \"polityIV\": 1.0, \"log_gdp\": 8.180320874773685}, {\"country\": \"Ireland\", \"region\": \"W. Europe\", \"gdppcap08\": 44200, \"polityIV\": 20.0, \"log_gdp\": 10.696480068065789}, {\"country\": \"Israel\", \"region\": \"Middle East\", \"gdppcap08\": 27548, \"polityIV\": 20.0, \"log_gdp\": 10.223685216664588}, {\"country\": \"Italy\", \"region\": \"W. Europe\", \"gdppcap08\": 30756, \"polityIV\": 20.0, \"log_gdp\": 10.333840376152072}, {\"country\": \"Jamaica\", \"region\": \"S. America\", \"gdppcap08\": 7705, \"polityIV\": 19.0, \"log_gdp\": 8.949624747754216}, {\"country\": \"Japan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 34099, \"polityIV\": 20.0, \"log_gdp\": 10.43702333732841}, {\"country\": \"Jordan\", \"region\": \"Middle East\", \"gdppcap08\": 5283, \"polityIV\": 8.0, \"log_gdp\": 8.572249397164315}, {\"country\": \"Kazakhstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 11315, \"polityIV\": 4.0, \"log_gdp\": 9.333884558067638}, {\"country\": \"Kenya\", \"region\": \"Africa\", \"gdppcap08\": 1590, \"polityIV\": 18.0, \"log_gdp\": 7.371489295214277}, {\"country\": \"Korea South\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27939, \"polityIV\": 18.0, \"log_gdp\": 10.237778841189767}, {\"country\": \"Kuwait\", \"region\": \"Middle East\", \"gdppcap08\": 39914, \"polityIV\": 3.0, \"log_gdp\": 10.59448241852793}, {\"country\": \"Kyrgyzstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2188, \"polityIV\": 7.0, \"log_gdp\": 7.690743163541872}, {\"country\": \"Laos\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2134, \"polityIV\": 3.0, \"log_gdp\": 7.665753431861699}, {\"country\": \"Latvia\", \"region\": \"C&E Europe\", \"gdppcap08\": 17100, \"polityIV\": 18.0, \"log_gdp\": 9.746833742490752}, {\"country\": \"Lesotho\", \"region\": \"Africa\", \"gdppcap08\": 1588, \"polityIV\": 18.0, \"log_gdp\": 7.370230641807081}, {\"country\": \"Liberia\", \"region\": \"Africa\", \"gdppcap08\": 388, \"polityIV\": 10.0, \"log_gdp\": 5.961005339623274}, {\"country\": \"Libya\", \"region\": \"Middle East\", \"gdppcap08\": 15402, \"polityIV\": 3.0, \"log_gdp\": 9.642252650099195}, {\"country\": \"Lithuania\", \"region\": \"C&E Europe\", \"gdppcap08\": 18824, \"polityIV\": 20.0, \"log_gdp\": 9.842887930407198}, {\"country\": \"Macedonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 10041, \"polityIV\": 19.0, \"log_gdp\": 9.214431989879436}, {\"country\": \"Madagascar\", \"region\": \"Africa\", \"gdppcap08\": 1049, \"polityIV\": 17.0, \"log_gdp\": 6.955592608396297}, {\"country\": \"Malawi\", \"region\": \"Africa\", \"gdppcap08\": 837, \"polityIV\": 15.0, \"log_gdp\": 6.729824070489475}, {\"country\": \"Malaysia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 14215, \"polityIV\": 13.0, \"log_gdp\": 9.5620530240851}, {\"country\": \"Mali\", \"region\": \"Africa\", \"gdppcap08\": 1128, \"polityIV\": 16.0, \"log_gdp\": 7.028201432058005}, {\"country\": \"Mauritania\", \"region\": \"Africa\", \"gdppcap08\": 2052, \"polityIV\": 4.0, \"log_gdp\": 7.62657020629066}, {\"country\": \"Mauritius\", \"region\": \"Africa\", \"gdppcap08\": 12079, \"polityIV\": 20.0, \"log_gdp\": 9.399223686605279}, {\"country\": \"Mexico\", \"region\": \"N. America\", \"gdppcap08\": 14495, \"polityIV\": 18.0, \"log_gdp\": 9.581559041355757}, {\"country\": \"Moldova\", \"region\": \"C&E Europe\", \"gdppcap08\": 2925, \"polityIV\": 18.0, \"log_gdp\": 7.981049759665957}, {\"country\": \"Mongolia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3566, \"polityIV\": 20.0, \"log_gdp\": 8.179199798423086}, {\"country\": \"Morocco\", \"region\": \"Middle East\", \"gdppcap08\": 4388, \"polityIV\": 4.0, \"log_gdp\": 8.38662882139512}, {\"country\": \"Mozambique\", \"region\": \"Africa\", \"gdppcap08\": 855, \"polityIV\": 16.0, \"log_gdp\": 6.75110146893676}, {\"country\": \"Namibia\", \"region\": \"Africa\", \"gdppcap08\": 6343, \"polityIV\": 16.0, \"log_gdp\": 8.755107121633896}, {\"country\": \"Nepal\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1112, \"polityIV\": 4.0, \"log_gdp\": 7.013915474810528}, {\"country\": \"Netherlands\", \"region\": \"W. Europe\", \"gdppcap08\": 40849, \"polityIV\": 20.0, \"log_gdp\": 10.617637620184352}, {\"country\": \"New Zealand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27029, \"polityIV\": 20.0, \"log_gdp\": 10.20466564265568}, {\"country\": \"Nicaragua\", \"region\": \"S. America\", \"gdppcap08\": 2682, \"polityIV\": 18.0, \"log_gdp\": 7.894318063841624}, {\"country\": \"Niger\", \"region\": \"Africa\", \"gdppcap08\": 684, \"polityIV\": 15.333333, \"log_gdp\": 6.52795791762255}, {\"country\": \"Nigeria\", \"region\": \"Africa\", \"gdppcap08\": 2082, \"polityIV\": 14.0, \"log_gdp\": 7.641084249174914}, {\"country\": \"Norway\", \"region\": \"Scandinavia\", \"gdppcap08\": 58138, \"polityIV\": 20.0, \"log_gdp\": 10.97057477379638}, {\"country\": \"Oman\", \"region\": \"Middle East\", \"gdppcap08\": 22478, \"polityIV\": 2.0, \"log_gdp\": 10.020292332078212}, {\"country\": \"Pakistan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2644, \"polityIV\": 5.0, \"log_gdp\": 7.880048200971577}, {\"country\": \"Papua New Guinea\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2208, \"polityIV\": 20.0, \"log_gdp\": 7.699842407396986}, {\"country\": \"Paraguay\", \"region\": \"S. America\", \"gdppcap08\": 4709, \"polityIV\": 17.666667, \"log_gdp\": 8.457230850243555}, {\"country\": \"Peru\", \"region\": \"S. America\", \"gdppcap08\": 8507, \"polityIV\": 19.0, \"log_gdp\": 9.048644632975885}, {\"country\": \"Philippines\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3510, \"polityIV\": 18.0, \"log_gdp\": 8.163371316459912}, {\"country\": \"Poland\", \"region\": \"C&E Europe\", \"gdppcap08\": 17625, \"polityIV\": 20.0, \"log_gdp\": 9.777073627680469}, {\"country\": \"Portugal\", \"region\": \"W. Europe\", \"gdppcap08\": 23074, \"polityIV\": 20.0, \"log_gdp\": 10.046461721487235}, {\"country\": \"Qatar\", \"region\": \"Middle East\", \"gdppcap08\": 85868, \"polityIV\": 0.0, \"log_gdp\": 11.360566512373978}, {\"country\": \"Romania\", \"region\": \"C&E Europe\", \"gdppcap08\": 14065, \"polityIV\": 18.333333, \"log_gdp\": 9.551444720923957}, {\"country\": \"Russia\", \"region\": \"C&E Europe\", \"gdppcap08\": 16139, \"polityIV\": 17.0, \"log_gdp\": 9.688993982035823}, {\"country\": \"Rwanda\", \"region\": \"Africa\", \"gdppcap08\": 1022, \"polityIV\": 6.6666667, \"log_gdp\": 6.92951677076365}, {\"country\": \"Saudi Arabia\", \"region\": \"Middle East\", \"gdppcap08\": 23920, \"polityIV\": 0.0, \"log_gdp\": 10.082470208064567}, {\"country\": \"Senegal\", \"region\": \"Africa\", \"gdppcap08\": 1772, \"polityIV\": 18.0, \"log_gdp\": 7.4798641311650265}, {\"country\": \"Sierra Leone\", \"region\": \"Africa\", \"gdppcap08\": 766, \"polityIV\": 15.0, \"log_gdp\": 6.641182169740591}, {\"country\": \"Singapore\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 49284, \"polityIV\": 8.0, \"log_gdp\": 10.805354763744559}, {\"country\": \"Slovakia\", \"region\": \"C&E Europe\", \"gdppcap08\": 22081, \"polityIV\": 19.0, \"log_gdp\": 10.00247278922055}, {\"country\": \"Slovenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 27605, \"polityIV\": 20.0, \"log_gdp\": 10.225752194718146}, {\"country\": \"Solomon Islands\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2610, \"polityIV\": 18.0, \"log_gdp\": 7.867105500316739}, {\"country\": \"South Africa\", \"region\": \"Africa\", \"gdppcap08\": 10109, \"polityIV\": 19.0, \"log_gdp\": 9.221181395154058}, {\"country\": \"Spain\", \"region\": \"W. Europe\", \"gdppcap08\": 31954, \"polityIV\": 20.0, \"log_gdp\": 10.372052647587516}, {\"country\": \"Sri Lanka\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4560, \"polityIV\": 15.333333, \"log_gdp\": 8.425077902508432}, {\"country\": \"Sudan\", \"region\": \"Africa\", \"gdppcap08\": 2153, \"polityIV\": 4.0, \"log_gdp\": 7.674617497364363}, {\"country\": \"Swaziland\", \"region\": \"Africa\", \"gdppcap08\": 4928, \"polityIV\": 1.0, \"log_gdp\": 8.502688505213357}, {\"country\": \"Sweden\", \"region\": \"Scandinavia\", \"gdppcap08\": 37383, \"polityIV\": 20.0, \"log_gdp\": 10.528971334610977}, {\"country\": \"Switzerland\", \"region\": \"W. Europe\", \"gdppcap08\": 42536, \"polityIV\": 20.0, \"log_gdp\": 10.658106055184174}, {\"country\": \"Taiwan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 30881, \"polityIV\": 19.333333, \"log_gdp\": 10.33789638703407}, {\"country\": \"Tajikistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 1906, \"polityIV\": 7.6666667, \"log_gdp\": 7.552762084214147}, {\"country\": \"Tanzania\", \"region\": \"Africa\", \"gdppcap08\": 1263, \"polityIV\": 11.0, \"log_gdp\": 7.141245122350491}, {\"country\": \"Thailand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 7703, \"polityIV\": 19.0, \"log_gdp\": 8.949365142352965}, {\"country\": \"Togo\", \"region\": \"Africa\", \"gdppcap08\": 829, \"polityIV\": 8.0, \"log_gdp\": 6.720220155135295}, {\"country\": \"Tunisia\", \"region\": \"Middle East\", \"gdppcap08\": 7996, \"polityIV\": 6.0, \"log_gdp\": 8.98669669562029}, {\"country\": \"Turkey\", \"region\": \"Middle East\", \"gdppcap08\": 13920, \"polityIV\": 17.0, \"log_gdp\": 9.54108193388841}, {\"country\": \"Turkmenistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 6641, \"polityIV\": 1.0, \"log_gdp\": 8.801017833540714}, {\"country\": \"UAE\", \"region\": \"Middle East\", \"gdppcap08\": 38830, \"polityIV\": 2.0, \"log_gdp\": 10.566948422725712}, {\"country\": \"Uganda\", \"region\": \"Africa\", \"gdppcap08\": 1165, \"polityIV\": 6.0, \"log_gdp\": 7.060476365999801}, {\"country\": \"Ukraine\", \"region\": \"C&E Europe\", \"gdppcap08\": 7271, \"polityIV\": 16.0, \"log_gdp\": 8.891649112650057}, {\"country\": \"United Kingdom\", \"region\": \"W. Europe\", \"gdppcap08\": 35445, \"polityIV\": 20.0, \"log_gdp\": 10.475737478289117}, {\"country\": \"United States\", \"region\": \"N. America\", \"gdppcap08\": 46716, \"polityIV\": 20.0, \"log_gdp\": 10.751841997398456}, {\"country\": \"Uruguay\", \"region\": \"S. America\", \"gdppcap08\": 12734, \"polityIV\": 20.0, \"log_gdp\": 9.45203086057697}, {\"country\": \"Uzbekistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2656, \"polityIV\": 1.0, \"log_gdp\": 7.884576510596324}, {\"country\": \"Venezuela\", \"region\": \"S. America\", \"gdppcap08\": 12804, \"polityIV\": 16.0, \"log_gdp\": 9.457512901089753}, {\"country\": \"Vietnam\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2785, \"polityIV\": 3.0, \"log_gdp\": 7.932003152361385}, {\"country\": \"Yemen\", \"region\": \"Middle East\", \"gdppcap08\": 2400, \"polityIV\": 8.0, \"log_gdp\": 7.783224016336037}, {\"country\": \"Zambia\", \"region\": \"Africa\", \"gdppcap08\": 1356, \"polityIV\": 15.0, \"log_gdp\": 7.212294468500341}, {\"country\": \"Zimbabwe\", \"region\": \"Africa\", \"gdppcap08\": 188, \"polityIV\": 6.0, \"log_gdp\": 5.236441962829949}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.LayerChart(...)"
      ]
     },
     "execution_count": 10,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "text = scatter.mark_text(size=8, dy=-8).encode(text=\"country\")\n",
    "scatter + loess + text"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Exercise 9\n",
    "\n",
    "Interesting. It seems that there's are a lot of rich, undemocratic countries that all have something in common: they're oil-rich, small, Middle Eastern countries.\n",
    "\n",
    "Let's see what happens if we exclude the ten countries with the highest per-capita oil production from our data: Qatar, Kuwait, Equatorial Guinea, United Arab Emirates, Norway, Saudi Arabia, Libya, Oman, Gabon, and Angola. (Note this was in 2007, and excludes very small countries!) \n",
    "\n",
    "What does the relationship between Polity and GDP per capita look like for non-natural resource producers?"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-ca6c961e036b4e0996a77608475ae0a5\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-ca6c961e036b4e0996a77608475ae0a5\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-ca6c961e036b4e0996a77608475ae0a5\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"layer\": [{\"mark\": \"point\", \"encoding\": {\"x\": {\"type\": \"quantitative\", \"field\": \"log_gdp\", \"scale\": {\"zero\": false}}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}}, {\"mark\": \"line\", \"encoding\": {\"x\": {\"type\": \"quantitative\", \"field\": \"log_gdp\", \"scale\": {\"zero\": false}}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}, \"transform\": [{\"loess\": \"polityIV\", \"on\": \"log_gdp\"}]}], \"data\": {\"name\": \"data-f5f9b03f793e72d37bd157649aeea89c\"}, \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-f5f9b03f793e72d37bd157649aeea89c\": [{\"country\": \"Albania\", \"region\": \"C&E Europe\", \"gdppcap08\": 7715, \"polityIV\": 17.8, \"log_gdp\": 8.950921764797261, \"bigproducer\": false}, {\"country\": \"Algeria\", \"region\": \"Africa\", \"gdppcap08\": 8033, \"polityIV\": 10.0, \"log_gdp\": 8.991313336173812, \"bigproducer\": false}, {\"country\": \"Argentina\", \"region\": \"S. America\", \"gdppcap08\": 14333, \"polityIV\": 18.0, \"log_gdp\": 9.570319849923216, \"bigproducer\": false}, {\"country\": \"Armenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 6070, \"polityIV\": 15.0, \"log_gdp\": 8.711113884053544, \"bigproducer\": false}, {\"country\": \"Australia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 35677, \"polityIV\": 20.0, \"log_gdp\": 10.482261502441474, \"bigproducer\": false}, {\"country\": \"Austria\", \"region\": \"W. Europe\", \"gdppcap08\": 38152, \"polityIV\": 20.0, \"log_gdp\": 10.54933345997806, \"bigproducer\": false}, {\"country\": \"Azerbaijan\", \"region\": \"C&E Europe\", \"gdppcap08\": 8765, \"polityIV\": 3.0, \"log_gdp\": 9.078521797355334, \"bigproducer\": false}, {\"country\": \"Bahrain\", \"region\": \"Middle East\", \"gdppcap08\": 34605, \"polityIV\": 3.0, \"log_gdp\": 10.451753459275963, \"bigproducer\": false}, {\"country\": \"Bangladesh\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1334, \"polityIV\": 16.0, \"log_gdp\": 7.195937226475569, \"bigproducer\": false}, {\"country\": \"Belarus\", \"region\": \"C&E Europe\", \"gdppcap08\": 12261, \"polityIV\": 3.0, \"log_gdp\": 9.414178772232386, \"bigproducer\": false}, {\"country\": \"Belgium\", \"region\": \"W. Europe\", \"gdppcap08\": 34493, \"polityIV\": 20.0, \"log_gdp\": 10.44851168388203, \"bigproducer\": false}, {\"country\": \"Benin\", \"region\": \"Africa\", \"gdppcap08\": 1468, \"polityIV\": 16.2, \"log_gdp\": 7.291656209174461, \"bigproducer\": false}, {\"country\": \"Bhutan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4755, \"polityIV\": 2.0, \"log_gdp\": 8.46695197497949, \"bigproducer\": false}, {\"country\": \"Bolivia\", \"region\": \"S. America\", \"gdppcap08\": 4278, \"polityIV\": 18.2, \"log_gdp\": 8.361240889642351, \"bigproducer\": false}, {\"country\": \"Botswana\", \"region\": \"Africa\", \"gdppcap08\": 13392, \"polityIV\": 19.0, \"log_gdp\": 9.502412792729256, \"bigproducer\": false}, {\"country\": \"Brazil\", \"region\": \"S. America\", \"gdppcap08\": 10296, \"polityIV\": 18.0, \"log_gdp\": 9.239510749275963, \"bigproducer\": false}, {\"country\": \"Bulgaria\", \"region\": \"C&E Europe\", \"gdppcap08\": 12393, \"polityIV\": 19.0, \"log_gdp\": 9.424887076064874, \"bigproducer\": false}, {\"country\": \"Burkina Faso\", \"region\": \"Africa\", \"gdppcap08\": 1161, \"polityIV\": 10.0, \"log_gdp\": 7.057036981697891, \"bigproducer\": false}, {\"country\": \"Cambodia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1905, \"polityIV\": 12.0, \"log_gdp\": 7.552237287560802, \"bigproducer\": false}, {\"country\": \"Cameroon\", \"region\": \"Africa\", \"gdppcap08\": 2215, \"polityIV\": 6.0, \"log_gdp\": 7.703007682479236, \"bigproducer\": false}, {\"country\": \"Canada\", \"region\": \"N. America\", \"gdppcap08\": 36444, \"polityIV\": 20.0, \"log_gdp\": 10.50353211483375, \"bigproducer\": false}, {\"country\": \"Central African Republic\", \"region\": \"Africa\", \"gdppcap08\": 736, \"polityIV\": 10.2, \"log_gdp\": 6.601230118728877, \"bigproducer\": false}, {\"country\": \"Chad\", \"region\": \"Africa\", \"gdppcap08\": 1455, \"polityIV\": 8.0, \"log_gdp\": 7.282761179605593, \"bigproducer\": false}, {\"country\": \"Chile\", \"region\": \"S. America\", \"gdppcap08\": 14465, \"polityIV\": 19.2, \"log_gdp\": 9.579487217410236, \"bigproducer\": false}, {\"country\": \"China\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 5962, \"polityIV\": 3.0, \"log_gdp\": 8.693161274238017, \"bigproducer\": false}, {\"country\": \"Colombia\", \"region\": \"S. America\", \"gdppcap08\": 8885, \"polityIV\": 17.0, \"log_gdp\": 9.092119740588751, \"bigproducer\": false}, {\"country\": \"Comoros\", \"region\": \"Africa\", \"gdppcap08\": 1169, \"polityIV\": 15.8, \"log_gdp\": 7.063903961472068, \"bigproducer\": false}, {\"country\": \"Congo Brazzaville\", \"region\": \"Africa\", \"gdppcap08\": 3946, \"polityIV\": 6.0, \"log_gdp\": 8.28045768658256, \"bigproducer\": false}, {\"country\": \"Congo Kinshasa\", \"region\": \"Africa\", \"gdppcap08\": 321, \"polityIV\": 15.0, \"log_gdp\": 5.771441123130016, \"bigproducer\": false}, {\"country\": \"Costa Rica\", \"region\": \"S. America\", \"gdppcap08\": 11241, \"polityIV\": 20.0, \"log_gdp\": 9.327323087461798, \"bigproducer\": false}, {\"country\": \"Croatia\", \"region\": \"C&E Europe\", \"gdppcap08\": 19084, \"polityIV\": 18.4, \"log_gdp\": 9.856605566635997, \"bigproducer\": false}, {\"country\": \"Cuba\", \"region\": \"S. America\", \"gdppcap08\": 9500, \"polityIV\": 3.0, \"log_gdp\": 9.159047077588632, \"bigproducer\": false}, {\"country\": \"Czech Republic\", \"region\": \"C&E Europe\", \"gdppcap08\": 24712, \"polityIV\": 20.0, \"log_gdp\": 10.115044234598418, \"bigproducer\": false}, {\"country\": \"Denmark\", \"region\": \"Scandinavia\", \"gdppcap08\": 36607, \"polityIV\": 20.0, \"log_gdp\": 10.507994757932803, \"bigproducer\": false}, {\"country\": \"Djibouti\", \"region\": \"Africa\", \"gdppcap08\": 2140, \"polityIV\": 12.0, \"log_gdp\": 7.668561108015897, \"bigproducer\": false}, {\"country\": \"Ecuador\", \"region\": \"S. America\", \"gdppcap08\": 8009, \"polityIV\": 16.2, \"log_gdp\": 8.988321188323683, \"bigproducer\": false}, {\"country\": \"Egypt\", \"region\": \"Middle East\", \"gdppcap08\": 5416, \"polityIV\": 4.0, \"log_gdp\": 8.59711281459211, \"bigproducer\": false}, {\"country\": \"El Salvador\", \"region\": \"S. America\", \"gdppcap08\": 6794, \"polityIV\": 17.0, \"log_gdp\": 8.82379514872053, \"bigproducer\": false}, {\"country\": \"Eritrea\", \"region\": \"Africa\", \"gdppcap08\": 632, \"polityIV\": 3.0, \"log_gdp\": 6.448889394146858, \"bigproducer\": false}, {\"country\": \"Estonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 20662, \"polityIV\": 16.0, \"log_gdp\": 9.936051543409391, \"bigproducer\": false}, {\"country\": \"Fiji\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4382, \"polityIV\": 13.8, \"log_gdp\": 8.385260520155413, \"bigproducer\": false}, {\"country\": \"Finland\", \"region\": \"Scandinavia\", \"gdppcap08\": 35427, \"polityIV\": 20.0, \"log_gdp\": 10.47522952026939, \"bigproducer\": false}, {\"country\": \"France\", \"region\": \"W. Europe\", \"gdppcap08\": 34045, \"polityIV\": 19.0, \"log_gdp\": 10.435438457917067, \"bigproducer\": false}, {\"country\": \"Gambia\", \"region\": \"Africa\", \"gdppcap08\": 1363, \"polityIV\": 5.0, \"log_gdp\": 7.217443431696533, \"bigproducer\": false}, {\"country\": \"Georgia\", \"region\": \"C&E Europe\", \"gdppcap08\": 4896, \"polityIV\": 15.666667, \"log_gdp\": 8.496173824192162, \"bigproducer\": false}, {\"country\": \"Germany\", \"region\": \"W. Europe\", \"gdppcap08\": 35613, \"polityIV\": 20.0, \"log_gdp\": 10.480466018721645, \"bigproducer\": false}, {\"country\": \"Ghana\", \"region\": \"Africa\", \"gdppcap08\": 1452, \"polityIV\": 16.666667, \"log_gdp\": 7.280697195384741, \"bigproducer\": false}, {\"country\": \"Greece\", \"region\": \"W. Europe\", \"gdppcap08\": 29361, \"polityIV\": 20.0, \"log_gdp\": 10.28742254209393, \"bigproducer\": false}, {\"country\": \"Guatemala\", \"region\": \"S. America\", \"gdppcap08\": 4760, \"polityIV\": 18.0, \"log_gdp\": 8.468002947225466, \"bigproducer\": false}, {\"country\": \"Guinea\", \"region\": \"Africa\", \"gdppcap08\": 1204, \"polityIV\": 9.0, \"log_gdp\": 7.093404625868766, \"bigproducer\": false}, {\"country\": \"Guinea-Bissau\", \"region\": \"Africa\", \"gdppcap08\": 538, \"polityIV\": 11.0, \"log_gdp\": 6.2878585601617845, \"bigproducer\": false}, {\"country\": \"Guyana\", \"region\": \"S. America\", \"gdppcap08\": 2542, \"polityIV\": 16.0, \"log_gdp\": 7.8407064517494, \"bigproducer\": false}, {\"country\": \"Haiti\", \"region\": \"S. America\", \"gdppcap08\": 1177, \"polityIV\": 8.0, \"log_gdp\": 7.0707241072602764, \"bigproducer\": false}, {\"country\": \"Honduras\", \"region\": \"S. America\", \"gdppcap08\": 3965, \"polityIV\": 17.0, \"log_gdp\": 8.285261134068948, \"bigproducer\": false}, {\"country\": \"Hungary\", \"region\": \"C&E Europe\", \"gdppcap08\": 19330, \"polityIV\": 20.0, \"log_gdp\": 9.869413572202376, \"bigproducer\": false}, {\"country\": \"India\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2972, \"polityIV\": 19.0, \"log_gdp\": 7.99699040583765, \"bigproducer\": false}, {\"country\": \"Indonesia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3975, \"polityIV\": 16.666667, \"log_gdp\": 8.287780027088433, \"bigproducer\": false}, {\"country\": \"Iran\", \"region\": \"Middle East\", \"gdppcap08\": 11666, \"polityIV\": 10.0, \"log_gdp\": 9.364433907313582, \"bigproducer\": false}, {\"country\": \"Iraq\", \"region\": \"Middle East\", \"gdppcap08\": 3570, \"polityIV\": 1.0, \"log_gdp\": 8.180320874773685, \"bigproducer\": false}, {\"country\": \"Ireland\", \"region\": \"W. Europe\", \"gdppcap08\": 44200, \"polityIV\": 20.0, \"log_gdp\": 10.696480068065789, \"bigproducer\": false}, {\"country\": \"Israel\", \"region\": \"Middle East\", \"gdppcap08\": 27548, \"polityIV\": 20.0, \"log_gdp\": 10.223685216664588, \"bigproducer\": false}, {\"country\": \"Italy\", \"region\": \"W. Europe\", \"gdppcap08\": 30756, \"polityIV\": 20.0, \"log_gdp\": 10.333840376152072, \"bigproducer\": false}, {\"country\": \"Jamaica\", \"region\": \"S. America\", \"gdppcap08\": 7705, \"polityIV\": 19.0, \"log_gdp\": 8.949624747754216, \"bigproducer\": false}, {\"country\": \"Japan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 34099, \"polityIV\": 20.0, \"log_gdp\": 10.43702333732841, \"bigproducer\": false}, {\"country\": \"Jordan\", \"region\": \"Middle East\", \"gdppcap08\": 5283, \"polityIV\": 8.0, \"log_gdp\": 8.572249397164315, \"bigproducer\": false}, {\"country\": \"Kazakhstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 11315, \"polityIV\": 4.0, \"log_gdp\": 9.333884558067638, \"bigproducer\": false}, {\"country\": \"Kenya\", \"region\": \"Africa\", \"gdppcap08\": 1590, \"polityIV\": 18.0, \"log_gdp\": 7.371489295214277, \"bigproducer\": false}, {\"country\": \"Korea South\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27939, \"polityIV\": 18.0, \"log_gdp\": 10.237778841189767, \"bigproducer\": false}, {\"country\": \"Kyrgyzstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2188, \"polityIV\": 7.0, \"log_gdp\": 7.690743163541872, \"bigproducer\": false}, {\"country\": \"Laos\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2134, \"polityIV\": 3.0, \"log_gdp\": 7.665753431861699, \"bigproducer\": false}, {\"country\": \"Latvia\", \"region\": \"C&E Europe\", \"gdppcap08\": 17100, \"polityIV\": 18.0, \"log_gdp\": 9.746833742490752, \"bigproducer\": false}, {\"country\": \"Lesotho\", \"region\": \"Africa\", \"gdppcap08\": 1588, \"polityIV\": 18.0, \"log_gdp\": 7.370230641807081, \"bigproducer\": false}, {\"country\": \"Liberia\", \"region\": \"Africa\", \"gdppcap08\": 388, \"polityIV\": 10.0, \"log_gdp\": 5.961005339623274, \"bigproducer\": false}, {\"country\": \"Lithuania\", \"region\": \"C&E Europe\", \"gdppcap08\": 18824, \"polityIV\": 20.0, \"log_gdp\": 9.842887930407198, \"bigproducer\": false}, {\"country\": \"Macedonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 10041, \"polityIV\": 19.0, \"log_gdp\": 9.214431989879436, \"bigproducer\": false}, {\"country\": \"Madagascar\", \"region\": \"Africa\", \"gdppcap08\": 1049, \"polityIV\": 17.0, \"log_gdp\": 6.955592608396297, \"bigproducer\": false}, {\"country\": \"Malawi\", \"region\": \"Africa\", \"gdppcap08\": 837, \"polityIV\": 15.0, \"log_gdp\": 6.729824070489475, \"bigproducer\": false}, {\"country\": \"Malaysia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 14215, \"polityIV\": 13.0, \"log_gdp\": 9.5620530240851, \"bigproducer\": false}, {\"country\": \"Mali\", \"region\": \"Africa\", \"gdppcap08\": 1128, \"polityIV\": 16.0, \"log_gdp\": 7.028201432058005, \"bigproducer\": false}, {\"country\": \"Mauritania\", \"region\": \"Africa\", \"gdppcap08\": 2052, \"polityIV\": 4.0, \"log_gdp\": 7.62657020629066, \"bigproducer\": false}, {\"country\": \"Mauritius\", \"region\": \"Africa\", \"gdppcap08\": 12079, \"polityIV\": 20.0, \"log_gdp\": 9.399223686605279, \"bigproducer\": false}, {\"country\": \"Mexico\", \"region\": \"N. America\", \"gdppcap08\": 14495, \"polityIV\": 18.0, \"log_gdp\": 9.581559041355757, \"bigproducer\": false}, {\"country\": \"Moldova\", \"region\": \"C&E Europe\", \"gdppcap08\": 2925, \"polityIV\": 18.0, \"log_gdp\": 7.981049759665957, \"bigproducer\": false}, {\"country\": \"Mongolia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3566, \"polityIV\": 20.0, \"log_gdp\": 8.179199798423086, \"bigproducer\": false}, {\"country\": \"Morocco\", \"region\": \"Middle East\", \"gdppcap08\": 4388, \"polityIV\": 4.0, \"log_gdp\": 8.38662882139512, \"bigproducer\": false}, {\"country\": \"Mozambique\", \"region\": \"Africa\", \"gdppcap08\": 855, \"polityIV\": 16.0, \"log_gdp\": 6.75110146893676, \"bigproducer\": false}, {\"country\": \"Namibia\", \"region\": \"Africa\", \"gdppcap08\": 6343, \"polityIV\": 16.0, \"log_gdp\": 8.755107121633896, \"bigproducer\": false}, {\"country\": \"Nepal\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1112, \"polityIV\": 4.0, \"log_gdp\": 7.013915474810528, \"bigproducer\": false}, {\"country\": \"Netherlands\", \"region\": \"W. Europe\", \"gdppcap08\": 40849, \"polityIV\": 20.0, \"log_gdp\": 10.617637620184352, \"bigproducer\": false}, {\"country\": \"New Zealand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27029, \"polityIV\": 20.0, \"log_gdp\": 10.20466564265568, \"bigproducer\": false}, {\"country\": \"Nicaragua\", \"region\": \"S. America\", \"gdppcap08\": 2682, \"polityIV\": 18.0, \"log_gdp\": 7.894318063841624, \"bigproducer\": false}, {\"country\": \"Niger\", \"region\": \"Africa\", \"gdppcap08\": 684, \"polityIV\": 15.333333, \"log_gdp\": 6.52795791762255, \"bigproducer\": false}, {\"country\": \"Nigeria\", \"region\": \"Africa\", \"gdppcap08\": 2082, \"polityIV\": 14.0, \"log_gdp\": 7.641084249174914, \"bigproducer\": false}, {\"country\": \"Pakistan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2644, \"polityIV\": 5.0, \"log_gdp\": 7.880048200971577, \"bigproducer\": false}, {\"country\": \"Papua New Guinea\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2208, \"polityIV\": 20.0, \"log_gdp\": 7.699842407396986, \"bigproducer\": false}, {\"country\": \"Paraguay\", \"region\": \"S. America\", \"gdppcap08\": 4709, \"polityIV\": 17.666667, \"log_gdp\": 8.457230850243555, \"bigproducer\": false}, {\"country\": \"Peru\", \"region\": \"S. America\", \"gdppcap08\": 8507, \"polityIV\": 19.0, \"log_gdp\": 9.048644632975885, \"bigproducer\": false}, {\"country\": \"Philippines\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3510, \"polityIV\": 18.0, \"log_gdp\": 8.163371316459912, \"bigproducer\": false}, {\"country\": \"Poland\", \"region\": \"C&E Europe\", \"gdppcap08\": 17625, \"polityIV\": 20.0, \"log_gdp\": 9.777073627680469, \"bigproducer\": false}, {\"country\": \"Portugal\", \"region\": \"W. Europe\", \"gdppcap08\": 23074, \"polityIV\": 20.0, \"log_gdp\": 10.046461721487235, \"bigproducer\": false}, {\"country\": \"Romania\", \"region\": \"C&E Europe\", \"gdppcap08\": 14065, \"polityIV\": 18.333333, \"log_gdp\": 9.551444720923957, \"bigproducer\": false}, {\"country\": \"Russia\", \"region\": \"C&E Europe\", \"gdppcap08\": 16139, \"polityIV\": 17.0, \"log_gdp\": 9.688993982035823, \"bigproducer\": false}, {\"country\": \"Rwanda\", \"region\": \"Africa\", \"gdppcap08\": 1022, \"polityIV\": 6.6666667, \"log_gdp\": 6.92951677076365, \"bigproducer\": false}, {\"country\": \"Senegal\", \"region\": \"Africa\", \"gdppcap08\": 1772, \"polityIV\": 18.0, \"log_gdp\": 7.4798641311650265, \"bigproducer\": false}, {\"country\": \"Sierra Leone\", \"region\": \"Africa\", \"gdppcap08\": 766, \"polityIV\": 15.0, \"log_gdp\": 6.641182169740591, \"bigproducer\": false}, {\"country\": \"Singapore\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 49284, \"polityIV\": 8.0, \"log_gdp\": 10.805354763744559, \"bigproducer\": false}, {\"country\": \"Slovakia\", \"region\": \"C&E Europe\", \"gdppcap08\": 22081, \"polityIV\": 19.0, \"log_gdp\": 10.00247278922055, \"bigproducer\": false}, {\"country\": \"Slovenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 27605, \"polityIV\": 20.0, \"log_gdp\": 10.225752194718146, \"bigproducer\": false}, {\"country\": \"Solomon Islands\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2610, \"polityIV\": 18.0, \"log_gdp\": 7.867105500316739, \"bigproducer\": false}, {\"country\": \"South Africa\", \"region\": \"Africa\", \"gdppcap08\": 10109, \"polityIV\": 19.0, \"log_gdp\": 9.221181395154058, \"bigproducer\": false}, {\"country\": \"Spain\", \"region\": \"W. Europe\", \"gdppcap08\": 31954, \"polityIV\": 20.0, \"log_gdp\": 10.372052647587516, \"bigproducer\": false}, {\"country\": \"Sri Lanka\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4560, \"polityIV\": 15.333333, \"log_gdp\": 8.425077902508432, \"bigproducer\": false}, {\"country\": \"Sudan\", \"region\": \"Africa\", \"gdppcap08\": 2153, \"polityIV\": 4.0, \"log_gdp\": 7.674617497364363, \"bigproducer\": false}, {\"country\": \"Swaziland\", \"region\": \"Africa\", \"gdppcap08\": 4928, \"polityIV\": 1.0, \"log_gdp\": 8.502688505213357, \"bigproducer\": false}, {\"country\": \"Sweden\", \"region\": \"Scandinavia\", \"gdppcap08\": 37383, \"polityIV\": 20.0, \"log_gdp\": 10.528971334610977, \"bigproducer\": false}, {\"country\": \"Switzerland\", \"region\": \"W. Europe\", \"gdppcap08\": 42536, \"polityIV\": 20.0, \"log_gdp\": 10.658106055184174, \"bigproducer\": false}, {\"country\": \"Taiwan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 30881, \"polityIV\": 19.333333, \"log_gdp\": 10.33789638703407, \"bigproducer\": false}, {\"country\": \"Tajikistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 1906, \"polityIV\": 7.6666667, \"log_gdp\": 7.552762084214147, \"bigproducer\": false}, {\"country\": \"Tanzania\", \"region\": \"Africa\", \"gdppcap08\": 1263, \"polityIV\": 11.0, \"log_gdp\": 7.141245122350491, \"bigproducer\": false}, {\"country\": \"Thailand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 7703, \"polityIV\": 19.0, \"log_gdp\": 8.949365142352965, \"bigproducer\": false}, {\"country\": \"Togo\", \"region\": \"Africa\", \"gdppcap08\": 829, \"polityIV\": 8.0, \"log_gdp\": 6.720220155135295, \"bigproducer\": false}, {\"country\": \"Tunisia\", \"region\": \"Middle East\", \"gdppcap08\": 7996, \"polityIV\": 6.0, \"log_gdp\": 8.98669669562029, \"bigproducer\": false}, {\"country\": \"Turkey\", \"region\": \"Middle East\", \"gdppcap08\": 13920, \"polityIV\": 17.0, \"log_gdp\": 9.54108193388841, \"bigproducer\": false}, {\"country\": \"Turkmenistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 6641, \"polityIV\": 1.0, \"log_gdp\": 8.801017833540714, \"bigproducer\": false}, {\"country\": \"Uganda\", \"region\": \"Africa\", \"gdppcap08\": 1165, \"polityIV\": 6.0, \"log_gdp\": 7.060476365999801, \"bigproducer\": false}, {\"country\": \"Ukraine\", \"region\": \"C&E Europe\", \"gdppcap08\": 7271, \"polityIV\": 16.0, \"log_gdp\": 8.891649112650057, \"bigproducer\": false}, {\"country\": \"United Kingdom\", \"region\": \"W. Europe\", \"gdppcap08\": 35445, \"polityIV\": 20.0, \"log_gdp\": 10.475737478289117, \"bigproducer\": false}, {\"country\": \"United States\", \"region\": \"N. America\", \"gdppcap08\": 46716, \"polityIV\": 20.0, \"log_gdp\": 10.751841997398456, \"bigproducer\": false}, {\"country\": \"Uruguay\", \"region\": \"S. America\", \"gdppcap08\": 12734, \"polityIV\": 20.0, \"log_gdp\": 9.45203086057697, \"bigproducer\": false}, {\"country\": \"Uzbekistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2656, \"polityIV\": 1.0, \"log_gdp\": 7.884576510596324, \"bigproducer\": false}, {\"country\": \"Venezuela\", \"region\": \"S. America\", \"gdppcap08\": 12804, \"polityIV\": 16.0, \"log_gdp\": 9.457512901089753, \"bigproducer\": false}, {\"country\": \"Vietnam\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2785, \"polityIV\": 3.0, \"log_gdp\": 7.932003152361385, \"bigproducer\": false}, {\"country\": \"Yemen\", \"region\": \"Middle East\", \"gdppcap08\": 2400, \"polityIV\": 8.0, \"log_gdp\": 7.783224016336037, \"bigproducer\": false}, {\"country\": \"Zambia\", \"region\": \"Africa\", \"gdppcap08\": 1356, \"polityIV\": 15.0, \"log_gdp\": 7.212294468500341, \"bigproducer\": false}, {\"country\": \"Zimbabwe\", \"region\": \"Africa\", \"gdppcap08\": 188, \"polityIV\": 6.0, \"log_gdp\": 5.236441962829949, \"bigproducer\": false}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.LayerChart(...)"
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "import numpy as np\n",
    "\n",
    "wdi[\"bigproducer\"] = wdi[\"country\"].isin(\n",
    "    [\n",
    "        \"Qatar\",\n",
    "        \"Kuwait\",\n",
    "        \"Equatorial Guinea\",\n",
    "        \"UAE\",\n",
    "        \"Norway\",\n",
    "        \"Angola\",\n",
    "        \"Saudi Arabia\",\n",
    "        \"Libya\",\n",
    "        \"Oman\",\n",
    "        \"Gabon\",\n",
    "    ]\n",
    ")\n",
    "\n",
    "import altair as alt\n",
    "\n",
    "scatter = (\n",
    "    alt.Chart(wdi[wdi.bigproducer == 0])\n",
    "    .mark_point()\n",
    "    .encode(x=alt.X(\"log_gdp\", scale=alt.Scale(zero=False)), y=\"polityIV\")\n",
    ")\n",
    "loess = scatter.transform_loess(\"log_gdp\", \"polityIV\").mark_line()\n",
    "\n",
    "scatter + loess\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Exercise 10\n",
    "\n",
    "Let's make sure that you accurately identified all 10 of the oil producers. Write a line of code to count up how many big producers you have identified. If you do not get 10, can you figure out what you did wrong?"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "10"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "wdi['bigproducer'].sum()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "10"
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "wdi.loc[wdi['bigproducer'] == 1, \"country\"].nunique()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "array(['Angola', 'Equatorial Guinea', 'Gabon', 'Kuwait', 'Libya',\n",
       "       'Norway', 'Oman', 'Qatar', 'Saudi Arabia', 'UAE'], dtype=object)"
      ]
     },
     "execution_count": 14,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "wdi.loc[wdi['bigproducer'] == 1, \"country\"].unique()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [],
   "source": [
    "# many people will get 9 because used United Arab Emirates, when it's UAE in the data. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Exercise 11\n",
    "\n",
    "How does the relationship between GDP per capita and Polity look for the oil producers we dropped above?"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-afbb25331a4b4780956ab2f6ba3cee5b\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-afbb25331a4b4780956ab2f6ba3cee5b\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-afbb25331a4b4780956ab2f6ba3cee5b\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"layer\": [{\"mark\": \"point\", \"encoding\": {\"x\": {\"type\": \"quantitative\", \"field\": \"log_gdp\", \"scale\": {\"zero\": false}}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}}, {\"mark\": \"line\", \"encoding\": {\"x\": {\"type\": \"quantitative\", \"field\": \"log_gdp\", \"scale\": {\"zero\": false}}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}, \"transform\": [{\"on\": \"log_gdp\", \"regression\": \"polityIV\"}]}], \"data\": {\"name\": \"data-7d2848e6ff87427e27ad2bf59f1d8b5f\"}, \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-7d2848e6ff87427e27ad2bf59f1d8b5f\": [{\"country\": \"Angola\", \"region\": \"Africa\", \"gdppcap08\": 5899, \"polityIV\": 8.0, \"log_gdp\": 8.682538124003075, \"bigproducer\": true}, {\"country\": \"Equatorial Guinea\", \"region\": \"Africa\", \"gdppcap08\": 33873, \"polityIV\": 5.0, \"log_gdp\": 10.430373515848633, \"bigproducer\": true}, {\"country\": \"Gabon\", \"region\": \"Africa\", \"gdppcap08\": 14527, \"polityIV\": 6.0, \"log_gdp\": 9.583764265872883, \"bigproducer\": true}, {\"country\": \"Kuwait\", \"region\": \"Middle East\", \"gdppcap08\": 39914, \"polityIV\": 3.0, \"log_gdp\": 10.59448241852793, \"bigproducer\": true}, {\"country\": \"Libya\", \"region\": \"Middle East\", \"gdppcap08\": 15402, \"polityIV\": 3.0, \"log_gdp\": 9.642252650099195, \"bigproducer\": true}, {\"country\": \"Norway\", \"region\": \"Scandinavia\", \"gdppcap08\": 58138, \"polityIV\": 20.0, \"log_gdp\": 10.97057477379638, \"bigproducer\": true}, {\"country\": \"Oman\", \"region\": \"Middle East\", \"gdppcap08\": 22478, \"polityIV\": 2.0, \"log_gdp\": 10.020292332078212, \"bigproducer\": true}, {\"country\": \"Qatar\", \"region\": \"Middle East\", \"gdppcap08\": 85868, \"polityIV\": 0.0, \"log_gdp\": 11.360566512373978, \"bigproducer\": true}, {\"country\": \"Saudi Arabia\", \"region\": \"Middle East\", \"gdppcap08\": 23920, \"polityIV\": 0.0, \"log_gdp\": 10.082470208064567, \"bigproducer\": true}, {\"country\": \"UAE\", \"region\": \"Middle East\", \"gdppcap08\": 38830, \"polityIV\": 2.0, \"log_gdp\": 10.566948422725712, \"bigproducer\": true}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.LayerChart(...)"
      ]
     },
     "execution_count": 16,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "scatter = (\n",
    "    alt.Chart(wdi[wdi.bigproducer == 1])\n",
    "    .mark_point()\n",
    "    .encode(x=alt.X(\"log_gdp\", scale=alt.Scale(zero=False)), y=\"polityIV\")\n",
    ")\n",
    "loess = scatter.transform_regression(\"log_gdp\", \"polityIV\").mark_line()\n",
    "\n",
    "scatter + loess"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Not even remotely similar. Aside from the super-outlier (Norway), the trend is downward!"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Exercise 12\n",
    "\n",
    "Look back to your answer for Exercise 2. Do you still believe the result of your linear model? What did you learn from plotting. Write down your answers with your partner. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Exercise 13\n",
    "\n",
    "Finally, let's make an interactive chart to help readers explore this relationship themselves! Create an interactive chart with a dropdown menu to select big oil producers / non-big oil producers, and add a mouseover to allow users to check the names of countries. \n",
    "\n",
    "(You might want to review the [interactive chart directions](https://altair-viz.github.io/user_guide/interactions.html#binding-adding-data-driven-inputs))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-5cdf20384f124484831777aaabf57150\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-5cdf20384f124484831777aaabf57150\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-5cdf20384f124484831777aaabf57150\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"data\": {\"name\": \"data-21cb7b625f9fe89fbee5eae2f112a801\"}, \"mark\": \"point\", \"encoding\": {\"color\": {\"condition\": {\"value\": \"red\", \"selection\": \"Country is a \"}, \"value\": \"lightgray\"}, \"tooltip\": {\"type\": \"nominal\", \"field\": \"country\"}, \"x\": {\"type\": \"quantitative\", \"field\": \"log_gdp\", \"scale\": {\"zero\": false}}, \"y\": {\"type\": \"quantitative\", \"field\": \"polityIV\"}}, \"selection\": {\"selector001\": {\"type\": \"interval\", \"bind\": \"scales\", \"encodings\": [\"x\", \"y\"]}, \"Country is a \": {\"type\": \"single\", \"fields\": [\"Large Oil Producer\"], \"bind\": {\"input\": \"select\", \"options\": [true, false]}}}, \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-21cb7b625f9fe89fbee5eae2f112a801\": [{\"country\": \"Albania\", \"region\": \"C&E Europe\", \"gdppcap08\": 7715, \"polityIV\": 17.8, \"log_gdp\": 8.950921764797261, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Algeria\", \"region\": \"Africa\", \"gdppcap08\": 8033, \"polityIV\": 10.0, \"log_gdp\": 8.991313336173812, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Angola\", \"region\": \"Africa\", \"gdppcap08\": 5899, \"polityIV\": 8.0, \"log_gdp\": 8.682538124003075, \"bigproducer\": true, \"Large Oil Producer\": true}, {\"country\": \"Argentina\", \"region\": \"S. America\", \"gdppcap08\": 14333, \"polityIV\": 18.0, \"log_gdp\": 9.570319849923216, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Armenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 6070, \"polityIV\": 15.0, \"log_gdp\": 8.711113884053544, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Australia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 35677, \"polityIV\": 20.0, \"log_gdp\": 10.482261502441474, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Austria\", \"region\": \"W. Europe\", \"gdppcap08\": 38152, \"polityIV\": 20.0, \"log_gdp\": 10.54933345997806, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Azerbaijan\", \"region\": \"C&E Europe\", \"gdppcap08\": 8765, \"polityIV\": 3.0, \"log_gdp\": 9.078521797355334, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Bahrain\", \"region\": \"Middle East\", \"gdppcap08\": 34605, \"polityIV\": 3.0, \"log_gdp\": 10.451753459275963, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Bangladesh\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1334, \"polityIV\": 16.0, \"log_gdp\": 7.195937226475569, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Belarus\", \"region\": \"C&E Europe\", \"gdppcap08\": 12261, \"polityIV\": 3.0, \"log_gdp\": 9.414178772232386, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Belgium\", \"region\": \"W. Europe\", \"gdppcap08\": 34493, \"polityIV\": 20.0, \"log_gdp\": 10.44851168388203, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Benin\", \"region\": \"Africa\", \"gdppcap08\": 1468, \"polityIV\": 16.2, \"log_gdp\": 7.291656209174461, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Bhutan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4755, \"polityIV\": 2.0, \"log_gdp\": 8.46695197497949, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Bolivia\", \"region\": \"S. America\", \"gdppcap08\": 4278, \"polityIV\": 18.2, \"log_gdp\": 8.361240889642351, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Botswana\", \"region\": \"Africa\", \"gdppcap08\": 13392, \"polityIV\": 19.0, \"log_gdp\": 9.502412792729256, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Brazil\", \"region\": \"S. America\", \"gdppcap08\": 10296, \"polityIV\": 18.0, \"log_gdp\": 9.239510749275963, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Bulgaria\", \"region\": \"C&E Europe\", \"gdppcap08\": 12393, \"polityIV\": 19.0, \"log_gdp\": 9.424887076064874, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Burkina Faso\", \"region\": \"Africa\", \"gdppcap08\": 1161, \"polityIV\": 10.0, \"log_gdp\": 7.057036981697891, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Cambodia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1905, \"polityIV\": 12.0, \"log_gdp\": 7.552237287560802, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Cameroon\", \"region\": \"Africa\", \"gdppcap08\": 2215, \"polityIV\": 6.0, \"log_gdp\": 7.703007682479236, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Canada\", \"region\": \"N. America\", \"gdppcap08\": 36444, \"polityIV\": 20.0, \"log_gdp\": 10.50353211483375, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Central African Republic\", \"region\": \"Africa\", \"gdppcap08\": 736, \"polityIV\": 10.2, \"log_gdp\": 6.601230118728877, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Chad\", \"region\": \"Africa\", \"gdppcap08\": 1455, \"polityIV\": 8.0, \"log_gdp\": 7.282761179605593, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Chile\", \"region\": \"S. America\", \"gdppcap08\": 14465, \"polityIV\": 19.2, \"log_gdp\": 9.579487217410236, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"China\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 5962, \"polityIV\": 3.0, \"log_gdp\": 8.693161274238017, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Colombia\", \"region\": \"S. America\", \"gdppcap08\": 8885, \"polityIV\": 17.0, \"log_gdp\": 9.092119740588751, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Comoros\", \"region\": \"Africa\", \"gdppcap08\": 1169, \"polityIV\": 15.8, \"log_gdp\": 7.063903961472068, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Congo Brazzaville\", \"region\": \"Africa\", \"gdppcap08\": 3946, \"polityIV\": 6.0, \"log_gdp\": 8.28045768658256, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Congo Kinshasa\", \"region\": \"Africa\", \"gdppcap08\": 321, \"polityIV\": 15.0, \"log_gdp\": 5.771441123130016, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Costa Rica\", \"region\": \"S. America\", \"gdppcap08\": 11241, \"polityIV\": 20.0, \"log_gdp\": 9.327323087461798, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Croatia\", \"region\": \"C&E Europe\", \"gdppcap08\": 19084, \"polityIV\": 18.4, \"log_gdp\": 9.856605566635997, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Cuba\", \"region\": \"S. America\", \"gdppcap08\": 9500, \"polityIV\": 3.0, \"log_gdp\": 9.159047077588632, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Czech Republic\", \"region\": \"C&E Europe\", \"gdppcap08\": 24712, \"polityIV\": 20.0, \"log_gdp\": 10.115044234598418, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Denmark\", \"region\": \"Scandinavia\", \"gdppcap08\": 36607, \"polityIV\": 20.0, \"log_gdp\": 10.507994757932803, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Djibouti\", \"region\": \"Africa\", \"gdppcap08\": 2140, \"polityIV\": 12.0, \"log_gdp\": 7.668561108015897, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Ecuador\", \"region\": \"S. America\", \"gdppcap08\": 8009, \"polityIV\": 16.2, \"log_gdp\": 8.988321188323683, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Egypt\", \"region\": \"Middle East\", \"gdppcap08\": 5416, \"polityIV\": 4.0, \"log_gdp\": 8.59711281459211, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"El Salvador\", \"region\": \"S. America\", \"gdppcap08\": 6794, \"polityIV\": 17.0, \"log_gdp\": 8.82379514872053, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Equatorial Guinea\", \"region\": \"Africa\", \"gdppcap08\": 33873, \"polityIV\": 5.0, \"log_gdp\": 10.430373515848633, \"bigproducer\": true, \"Large Oil Producer\": true}, {\"country\": \"Eritrea\", \"region\": \"Africa\", \"gdppcap08\": 632, \"polityIV\": 3.0, \"log_gdp\": 6.448889394146858, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Estonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 20662, \"polityIV\": 16.0, \"log_gdp\": 9.936051543409391, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Fiji\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4382, \"polityIV\": 13.8, \"log_gdp\": 8.385260520155413, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Finland\", \"region\": \"Scandinavia\", \"gdppcap08\": 35427, \"polityIV\": 20.0, \"log_gdp\": 10.47522952026939, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"France\", \"region\": \"W. Europe\", \"gdppcap08\": 34045, \"polityIV\": 19.0, \"log_gdp\": 10.435438457917067, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Gabon\", \"region\": \"Africa\", \"gdppcap08\": 14527, \"polityIV\": 6.0, \"log_gdp\": 9.583764265872883, \"bigproducer\": true, \"Large Oil Producer\": true}, {\"country\": \"Gambia\", \"region\": \"Africa\", \"gdppcap08\": 1363, \"polityIV\": 5.0, \"log_gdp\": 7.217443431696533, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Georgia\", \"region\": \"C&E Europe\", \"gdppcap08\": 4896, \"polityIV\": 15.666667, \"log_gdp\": 8.496173824192162, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Germany\", \"region\": \"W. Europe\", \"gdppcap08\": 35613, \"polityIV\": 20.0, \"log_gdp\": 10.480466018721645, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Ghana\", \"region\": \"Africa\", \"gdppcap08\": 1452, \"polityIV\": 16.666667, \"log_gdp\": 7.280697195384741, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Greece\", \"region\": \"W. Europe\", \"gdppcap08\": 29361, \"polityIV\": 20.0, \"log_gdp\": 10.28742254209393, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Guatemala\", \"region\": \"S. America\", \"gdppcap08\": 4760, \"polityIV\": 18.0, \"log_gdp\": 8.468002947225466, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Guinea\", \"region\": \"Africa\", \"gdppcap08\": 1204, \"polityIV\": 9.0, \"log_gdp\": 7.093404625868766, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Guinea-Bissau\", \"region\": \"Africa\", \"gdppcap08\": 538, \"polityIV\": 11.0, \"log_gdp\": 6.2878585601617845, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Guyana\", \"region\": \"S. America\", \"gdppcap08\": 2542, \"polityIV\": 16.0, \"log_gdp\": 7.8407064517494, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Haiti\", \"region\": \"S. America\", \"gdppcap08\": 1177, \"polityIV\": 8.0, \"log_gdp\": 7.0707241072602764, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Honduras\", \"region\": \"S. America\", \"gdppcap08\": 3965, \"polityIV\": 17.0, \"log_gdp\": 8.285261134068948, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Hungary\", \"region\": \"C&E Europe\", \"gdppcap08\": 19330, \"polityIV\": 20.0, \"log_gdp\": 9.869413572202376, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"India\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2972, \"polityIV\": 19.0, \"log_gdp\": 7.99699040583765, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Indonesia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3975, \"polityIV\": 16.666667, \"log_gdp\": 8.287780027088433, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Iran\", \"region\": \"Middle East\", \"gdppcap08\": 11666, \"polityIV\": 10.0, \"log_gdp\": 9.364433907313582, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Iraq\", \"region\": \"Middle East\", \"gdppcap08\": 3570, \"polityIV\": 1.0, \"log_gdp\": 8.180320874773685, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Ireland\", \"region\": \"W. Europe\", \"gdppcap08\": 44200, \"polityIV\": 20.0, \"log_gdp\": 10.696480068065789, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Israel\", \"region\": \"Middle East\", \"gdppcap08\": 27548, \"polityIV\": 20.0, \"log_gdp\": 10.223685216664588, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Italy\", \"region\": \"W. Europe\", \"gdppcap08\": 30756, \"polityIV\": 20.0, \"log_gdp\": 10.333840376152072, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Jamaica\", \"region\": \"S. America\", \"gdppcap08\": 7705, \"polityIV\": 19.0, \"log_gdp\": 8.949624747754216, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Japan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 34099, \"polityIV\": 20.0, \"log_gdp\": 10.43702333732841, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Jordan\", \"region\": \"Middle East\", \"gdppcap08\": 5283, \"polityIV\": 8.0, \"log_gdp\": 8.572249397164315, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Kazakhstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 11315, \"polityIV\": 4.0, \"log_gdp\": 9.333884558067638, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Kenya\", \"region\": \"Africa\", \"gdppcap08\": 1590, \"polityIV\": 18.0, \"log_gdp\": 7.371489295214277, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Korea South\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27939, \"polityIV\": 18.0, \"log_gdp\": 10.237778841189767, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Kuwait\", \"region\": \"Middle East\", \"gdppcap08\": 39914, \"polityIV\": 3.0, \"log_gdp\": 10.59448241852793, \"bigproducer\": true, \"Large Oil Producer\": true}, {\"country\": \"Kyrgyzstan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2188, \"polityIV\": 7.0, \"log_gdp\": 7.690743163541872, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Laos\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2134, \"polityIV\": 3.0, \"log_gdp\": 7.665753431861699, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Latvia\", \"region\": \"C&E Europe\", \"gdppcap08\": 17100, \"polityIV\": 18.0, \"log_gdp\": 9.746833742490752, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Lesotho\", \"region\": \"Africa\", \"gdppcap08\": 1588, \"polityIV\": 18.0, \"log_gdp\": 7.370230641807081, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Liberia\", \"region\": \"Africa\", \"gdppcap08\": 388, \"polityIV\": 10.0, \"log_gdp\": 5.961005339623274, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Libya\", \"region\": \"Middle East\", \"gdppcap08\": 15402, \"polityIV\": 3.0, \"log_gdp\": 9.642252650099195, \"bigproducer\": true, \"Large Oil Producer\": true}, {\"country\": \"Lithuania\", \"region\": \"C&E Europe\", \"gdppcap08\": 18824, \"polityIV\": 20.0, \"log_gdp\": 9.842887930407198, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Macedonia\", \"region\": \"C&E Europe\", \"gdppcap08\": 10041, \"polityIV\": 19.0, \"log_gdp\": 9.214431989879436, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Madagascar\", \"region\": \"Africa\", \"gdppcap08\": 1049, \"polityIV\": 17.0, \"log_gdp\": 6.955592608396297, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Malawi\", \"region\": \"Africa\", \"gdppcap08\": 837, \"polityIV\": 15.0, \"log_gdp\": 6.729824070489475, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Malaysia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 14215, \"polityIV\": 13.0, \"log_gdp\": 9.5620530240851, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Mali\", \"region\": \"Africa\", \"gdppcap08\": 1128, \"polityIV\": 16.0, \"log_gdp\": 7.028201432058005, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Mauritania\", \"region\": \"Africa\", \"gdppcap08\": 2052, \"polityIV\": 4.0, \"log_gdp\": 7.62657020629066, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Mauritius\", \"region\": \"Africa\", \"gdppcap08\": 12079, \"polityIV\": 20.0, \"log_gdp\": 9.399223686605279, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Mexico\", \"region\": \"N. America\", \"gdppcap08\": 14495, \"polityIV\": 18.0, \"log_gdp\": 9.581559041355757, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Moldova\", \"region\": \"C&E Europe\", \"gdppcap08\": 2925, \"polityIV\": 18.0, \"log_gdp\": 7.981049759665957, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Mongolia\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3566, \"polityIV\": 20.0, \"log_gdp\": 8.179199798423086, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Morocco\", \"region\": \"Middle East\", \"gdppcap08\": 4388, \"polityIV\": 4.0, \"log_gdp\": 8.38662882139512, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Mozambique\", \"region\": \"Africa\", \"gdppcap08\": 855, \"polityIV\": 16.0, \"log_gdp\": 6.75110146893676, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Namibia\", \"region\": \"Africa\", \"gdppcap08\": 6343, \"polityIV\": 16.0, \"log_gdp\": 8.755107121633896, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Nepal\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 1112, \"polityIV\": 4.0, \"log_gdp\": 7.013915474810528, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Netherlands\", \"region\": \"W. Europe\", \"gdppcap08\": 40849, \"polityIV\": 20.0, \"log_gdp\": 10.617637620184352, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"New Zealand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 27029, \"polityIV\": 20.0, \"log_gdp\": 10.20466564265568, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Nicaragua\", \"region\": \"S. America\", \"gdppcap08\": 2682, \"polityIV\": 18.0, \"log_gdp\": 7.894318063841624, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Niger\", \"region\": \"Africa\", \"gdppcap08\": 684, \"polityIV\": 15.333333, \"log_gdp\": 6.52795791762255, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Nigeria\", \"region\": \"Africa\", \"gdppcap08\": 2082, \"polityIV\": 14.0, \"log_gdp\": 7.641084249174914, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Norway\", \"region\": \"Scandinavia\", \"gdppcap08\": 58138, \"polityIV\": 20.0, \"log_gdp\": 10.97057477379638, \"bigproducer\": true, \"Large Oil Producer\": true}, {\"country\": \"Oman\", \"region\": \"Middle East\", \"gdppcap08\": 22478, \"polityIV\": 2.0, \"log_gdp\": 10.020292332078212, \"bigproducer\": true, \"Large Oil Producer\": true}, {\"country\": \"Pakistan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2644, \"polityIV\": 5.0, \"log_gdp\": 7.880048200971577, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Papua New Guinea\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2208, \"polityIV\": 20.0, \"log_gdp\": 7.699842407396986, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Paraguay\", \"region\": \"S. America\", \"gdppcap08\": 4709, \"polityIV\": 17.666667, \"log_gdp\": 8.457230850243555, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Peru\", \"region\": \"S. America\", \"gdppcap08\": 8507, \"polityIV\": 19.0, \"log_gdp\": 9.048644632975885, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Philippines\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 3510, \"polityIV\": 18.0, \"log_gdp\": 8.163371316459912, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Poland\", \"region\": \"C&E Europe\", \"gdppcap08\": 17625, \"polityIV\": 20.0, \"log_gdp\": 9.777073627680469, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Portugal\", \"region\": \"W. Europe\", \"gdppcap08\": 23074, \"polityIV\": 20.0, \"log_gdp\": 10.046461721487235, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Qatar\", \"region\": \"Middle East\", \"gdppcap08\": 85868, \"polityIV\": 0.0, \"log_gdp\": 11.360566512373978, \"bigproducer\": true, \"Large Oil Producer\": true}, {\"country\": \"Romania\", \"region\": \"C&E Europe\", \"gdppcap08\": 14065, \"polityIV\": 18.333333, \"log_gdp\": 9.551444720923957, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Russia\", \"region\": \"C&E Europe\", \"gdppcap08\": 16139, \"polityIV\": 17.0, \"log_gdp\": 9.688993982035823, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Rwanda\", \"region\": \"Africa\", \"gdppcap08\": 1022, \"polityIV\": 6.6666667, \"log_gdp\": 6.92951677076365, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Saudi Arabia\", \"region\": \"Middle East\", \"gdppcap08\": 23920, \"polityIV\": 0.0, \"log_gdp\": 10.082470208064567, \"bigproducer\": true, \"Large Oil Producer\": true}, {\"country\": \"Senegal\", \"region\": \"Africa\", \"gdppcap08\": 1772, \"polityIV\": 18.0, \"log_gdp\": 7.4798641311650265, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Sierra Leone\", \"region\": \"Africa\", \"gdppcap08\": 766, \"polityIV\": 15.0, \"log_gdp\": 6.641182169740591, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Singapore\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 49284, \"polityIV\": 8.0, \"log_gdp\": 10.805354763744559, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Slovakia\", \"region\": \"C&E Europe\", \"gdppcap08\": 22081, \"polityIV\": 19.0, \"log_gdp\": 10.00247278922055, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Slovenia\", \"region\": \"C&E Europe\", \"gdppcap08\": 27605, \"polityIV\": 20.0, \"log_gdp\": 10.225752194718146, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Solomon Islands\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2610, \"polityIV\": 18.0, \"log_gdp\": 7.867105500316739, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"South Africa\", \"region\": \"Africa\", \"gdppcap08\": 10109, \"polityIV\": 19.0, \"log_gdp\": 9.221181395154058, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Spain\", \"region\": \"W. Europe\", \"gdppcap08\": 31954, \"polityIV\": 20.0, \"log_gdp\": 10.372052647587516, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Sri Lanka\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 4560, \"polityIV\": 15.333333, \"log_gdp\": 8.425077902508432, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Sudan\", \"region\": \"Africa\", \"gdppcap08\": 2153, \"polityIV\": 4.0, \"log_gdp\": 7.674617497364363, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Swaziland\", \"region\": \"Africa\", \"gdppcap08\": 4928, \"polityIV\": 1.0, \"log_gdp\": 8.502688505213357, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Sweden\", \"region\": \"Scandinavia\", \"gdppcap08\": 37383, \"polityIV\": 20.0, \"log_gdp\": 10.528971334610977, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Switzerland\", \"region\": \"W. Europe\", \"gdppcap08\": 42536, \"polityIV\": 20.0, \"log_gdp\": 10.658106055184174, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Taiwan\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 30881, \"polityIV\": 19.333333, \"log_gdp\": 10.33789638703407, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Tajikistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 1906, \"polityIV\": 7.6666667, \"log_gdp\": 7.552762084214147, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Tanzania\", \"region\": \"Africa\", \"gdppcap08\": 1263, \"polityIV\": 11.0, \"log_gdp\": 7.141245122350491, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Thailand\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 7703, \"polityIV\": 19.0, \"log_gdp\": 8.949365142352965, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Togo\", \"region\": \"Africa\", \"gdppcap08\": 829, \"polityIV\": 8.0, \"log_gdp\": 6.720220155135295, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Tunisia\", \"region\": \"Middle East\", \"gdppcap08\": 7996, \"polityIV\": 6.0, \"log_gdp\": 8.98669669562029, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Turkey\", \"region\": \"Middle East\", \"gdppcap08\": 13920, \"polityIV\": 17.0, \"log_gdp\": 9.54108193388841, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Turkmenistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 6641, \"polityIV\": 1.0, \"log_gdp\": 8.801017833540714, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"UAE\", \"region\": \"Middle East\", \"gdppcap08\": 38830, \"polityIV\": 2.0, \"log_gdp\": 10.566948422725712, \"bigproducer\": true, \"Large Oil Producer\": true}, {\"country\": \"Uganda\", \"region\": \"Africa\", \"gdppcap08\": 1165, \"polityIV\": 6.0, \"log_gdp\": 7.060476365999801, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Ukraine\", \"region\": \"C&E Europe\", \"gdppcap08\": 7271, \"polityIV\": 16.0, \"log_gdp\": 8.891649112650057, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"United Kingdom\", \"region\": \"W. Europe\", \"gdppcap08\": 35445, \"polityIV\": 20.0, \"log_gdp\": 10.475737478289117, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"United States\", \"region\": \"N. America\", \"gdppcap08\": 46716, \"polityIV\": 20.0, \"log_gdp\": 10.751841997398456, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Uruguay\", \"region\": \"S. America\", \"gdppcap08\": 12734, \"polityIV\": 20.0, \"log_gdp\": 9.45203086057697, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Uzbekistan\", \"region\": \"C&E Europe\", \"gdppcap08\": 2656, \"polityIV\": 1.0, \"log_gdp\": 7.884576510596324, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Venezuela\", \"region\": \"S. America\", \"gdppcap08\": 12804, \"polityIV\": 16.0, \"log_gdp\": 9.457512901089753, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Vietnam\", \"region\": \"Asia-Pacific\", \"gdppcap08\": 2785, \"polityIV\": 3.0, \"log_gdp\": 7.932003152361385, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Yemen\", \"region\": \"Middle East\", \"gdppcap08\": 2400, \"polityIV\": 8.0, \"log_gdp\": 7.783224016336037, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Zambia\", \"region\": \"Africa\", \"gdppcap08\": 1356, \"polityIV\": 15.0, \"log_gdp\": 7.212294468500341, \"bigproducer\": false, \"Large Oil Producer\": false}, {\"country\": \"Zimbabwe\", \"region\": \"Africa\", \"gdppcap08\": 188, \"polityIV\": 6.0, \"log_gdp\": 5.236441962829949, \"bigproducer\": false, \"Large Oil Producer\": false}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.Chart(...)"
      ]
     },
     "execution_count": 18,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "wdi[\"Large Oil Producer\"] = wdi[\"bigproducer\"]\n",
    "input_dropdown = alt.binding_select(options=[True, False])\n",
    "selection = alt.selection_single(\n",
    "    fields=[\"Large Oil Producer\"], bind=input_dropdown, name=\"Country is a \"\n",
    ")\n",
    "color = alt.condition(selection, alt.value(\"red\"), alt.value(\"lightgray\"))\n",
    "\n",
    "scatter = (\n",
    "    (\n",
    "        alt.Chart(wdi)\n",
    "        .mark_point()\n",
    "        .encode(\n",
    "            x=alt.X(\"log_gdp\", scale=alt.Scale(zero=False)),\n",
    "            y=\"polityIV\",\n",
    "            tooltip=\"country:N\",\n",
    "            color=color,\n",
    "        )\n",
    "    )\n",
    "    .interactive()\n",
    "    .add_selection(selection)\n",
    ")\n",
    "scatter\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Take-aways\n",
    "\n",
    "One of our main jobs as data scientists is to *summarize* data. In fact, its such an obvious part of our jobs we often don't think about it very much. In reality, however, this is one of the most difficult things we do. \n",
    "\n",
    "Summarization means taking rich, complex data and trying to tell readers about what is going on in that data using simple statistics. In the process of summarization, therefore, we must necessarily throw away much of the richness of the original data. When done well, this simplification makes data easier to understand, but only if we throw away the *right* data. You can *always* calulate the average value of a variable, or fit a linear model, but whether doing so generates a summary statistic that properly represents the essence of the data being studied depends on the data itself. \n",
    "\n",
    "Plotting is one fo the best tools we have as data scientists for evaluating whether we are throwing away the *right* data. As we learned from Part 1 of this exercise, just looking at means and standard deviations can mask tremendous variation. Each of our example datasets looked the same when we examined our summary statistics, but they were all radically different when plotted. \n",
    "\n",
    "Similarly, a simple linear model would \"tell\" us that if GDP per capita increases by \\$10,000, we would expect Polity scores to increase by about 1 (i.e. the coefficent on the linear model was 9.602e-05). But when we plot the data, not only can we that the data is definitely *not* linear (and so that slope doesn't really mean anything), but we can also see that oil producing countries seem to defy the overall trend, and so should maybe be studied separately. \n",
    "\n",
    "Moreover, we can see that if we just look at oil producers, there is no clear story: some are rich and democratic, while others are rich and autocratic (indeed, [this observation is the foundation of some great research on the political consequences of resource wealth](https://www.jstor.org/stable/41480824)!)\n",
    "\n",
    "So remember this: tools for summarizing data will always give you an answer, but it's up to you as a data scientist to make sure that the summaries you pass on to other people properly represent the data you're using. And there is perhaps no better way to do this than with plotting!\n",
    "\n"
   ]
  }
 ],
 "metadata": {
  "interpreter": {
   "hash": "f06fa9c80cc08d4d343f66ad24a278ad0285590eac640a80c32c9d748f33a802"
  },
  "kernelspec": {
   "display_name": "Python 3.9.7 64-bit ('base': conda)",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.7"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
